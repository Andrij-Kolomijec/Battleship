(()=>{"use strict";var e={426:(e,n,t)=>{t.d(n,{Z:()=>h});var r=t(537),o=t.n(r),i=t(645),a=t.n(i),s=t(667),c=t.n(s),l=new URL(t(132),t.b),d=new URL(t(685),t.b),A=a()(o()),p=c()(l),u=c()(d);A.push([e.id,`* {\n  margin: 0;\n  padding: 0;\n}\n\n:root {\n  --border-color: antiquewhite;\n  --ship-color: rgb(76, 183, 226);\n}\n\nbody {\n  height: 99vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  background: url(${p});\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  background-position: center;\n  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;\n}\n\nheader {\n  font-size: 70px;\n  margin-top: 50px;\n  color: antiquewhite;\n  text-shadow: 5px 5px 4px rgba(0, 0, 0, 0.9);\n}\n\n#content {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n#button-container {\n  display: flex;\n  align-self: center;\n  flex-direction: column;\n  gap: 30px;\n}\n\nbutton {\n  font-size: 30px;\n  background-color: transparent;\n  border-radius: 15px;\n  color: antiquewhite;\n  padding: 0 10px;\n  width: 310px;\n}\n\nbutton:hover {\n  font-weight: bold;\n}\n\n#headings {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 20px;\n  color: antiquewhite;\n  font-size: 30px;\n  position: relative;\n}\n\n#tooltip {\n  color: antiquewhite;\n  font-size: 1rem;\n  position: absolute;\n  top: 2.5rem;\n}\n\n#board-container {\n  display: grid;\n  grid-template: auto / auto auto auto auto ;\n  gap: 10px;\n  box-sizing: border-box;\n}\n\n.fleet {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.fleet.player {\n  align-items: flex-end;\n}\n\n.vessel {\n  display: flex;\n}\n\n.vessel > div {\n  border: 1px solid var(--border-color);\n  border-top: 2px solid var(--border-color);\n  border-bottom: 2px solid var(--border-color);\n  background-color: var(--ship-color);\n  height: 20px;\n  width: 20px;\n}\n\n.vessel > div:first-child {\n  border-left: 2px solid var(--border-color);\n}\n\n.vessel > div:last-child {\n  border-right: 2px solid var(--border-color);\n}\n\n#gameboard-enemy,\n#gameboard-player {\n  display: grid;\n  grid-template: repeat(10, 45px) / repeat(10, 45px);\n  border: 1px solid var(--border-color);\n  box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.7);\n  backdrop-filter: blur(50px);\n}\n\n.cell,\n.cell-enemy {\n  border: 1px solid var(--border-color);\n}\n\n.ship {\n  background-color: var(--ship-color);\n}\n\n.hit {\n  background-color: rgb(165, 165, 165);\n}\n\n.hit.ship,\n.hit.ship-enemy {\n  background-color: rgb(145, 36, 36);\n}\n\nfooter {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  align-self: stretch;\n  margin: 15px 50px;\n  color: #faebd7;\n}\n\n.icon {\n  height: 35px;\n  filter: invert(85%) sepia(2%) saturate(1581%) hue-rotate(342deg) brightness(107%) contrast(102%);\n  transition: transform 1.4s ease-in-out;\n  background: url(${u});\n}\n\n.icon:hover {\n  transform: rotate(720deg) scale(1.5);\n}\n\na {\n  color: antiquewhite;\n}\n\n.invalid-drop {\n  background-color: rgb(160, 97, 97);\n}\n\n.valid-drop {\n  background-color: rgb(101, 170, 101);\n}\n`,"",{version:3,sources:["webpack://./src/style.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,UAAU;AACZ;;AAEA;EACE,4BAA4B;EAC5B,+BAA+B;AACjC;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,sBAAsB;EACtB,8BAA8B;EAC9B,mBAAmB;EACnB,mDAAmC;EACnC,sBAAsB;EACtB,4BAA4B;EAC5B,4BAA4B;EAC5B,2BAA2B;EAC3B,sHAAsH;AACxH;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,mBAAmB;EACnB,2CAA2C;AAC7C;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,SAAS;AACX;;AAEA;EACE,aAAa;EACb,kBAAkB;EAClB,sBAAsB;EACtB,SAAS;AACX;;AAEA;EACE,eAAe;EACf,6BAA6B;EAC7B,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,YAAY;AACd;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,YAAY;EACZ,mBAAmB;EACnB,eAAe;EACf,kBAAkB;AACpB;;AAEA;EACE,mBAAmB;EACnB,eAAe;EACf,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,aAAa;EACb,0CAA0C;EAC1C,SAAS;EACT,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,QAAQ;AACV;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,aAAa;AACf;;AAEA;EACE,qCAAqC;EACrC,yCAAyC;EACzC,4CAA4C;EAC5C,mCAAmC;EACnC,YAAY;EACZ,WAAW;AACb;;AAEA;EACE,0CAA0C;AAC5C;;AAEA;EACE,2CAA2C;AAC7C;;AAEA;;EAEE,aAAa;EACb,kDAAkD;EAClD,qCAAqC;EACrC,0CAA0C;EAC1C,2BAA2B;AAC7B;;AAEA;;EAEE,qCAAqC;AACvC;;AAEA;EACE,mCAAmC;AACrC;;AAEA;EACE,oCAAoC;AACtC;;AAEA;;EAEE,kCAAkC;AACpC;;AAEA;EACE,aAAa;EACb,8BAA8B;EAC9B,mBAAmB;EACnB,mBAAmB;EACnB,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,YAAY;EACZ,gGAAgG;EAChG,sCAAsC;EACtC,mDAA+B;AACjC;;AAEA;EACE,oCAAoC;AACtC;;AAEA;EACE,mBAAmB;AACrB;;AAEA;EACE,kCAAkC;AACpC;;AAEA;EACE,oCAAoC;AACtC",sourcesContent:["* {\n  margin: 0;\n  padding: 0;\n}\n\n:root {\n  --border-color: antiquewhite;\n  --ship-color: rgb(76, 183, 226);\n}\n\nbody {\n  height: 99vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n  background: url('./battleship.jpg');\n  background-size: cover;\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  background-position: center;\n  font-family: 'Lucida Sans', 'Lucida Sans Regular', 'Lucida Grande', 'Lucida Sans Unicode', Geneva, Verdana, sans-serif;\n}\n\nheader {\n  font-size: 70px;\n  margin-top: 50px;\n  color: antiquewhite;\n  text-shadow: 5px 5px 4px rgba(0, 0, 0, 0.9);\n}\n\n#content {\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n}\n\n#button-container {\n  display: flex;\n  align-self: center;\n  flex-direction: column;\n  gap: 30px;\n}\n\nbutton {\n  font-size: 30px;\n  background-color: transparent;\n  border-radius: 15px;\n  color: antiquewhite;\n  padding: 0 10px;\n  width: 310px;\n}\n\nbutton:hover {\n  font-weight: bold;\n}\n\n#headings {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 20px;\n  color: antiquewhite;\n  font-size: 30px;\n  position: relative;\n}\n\n#tooltip {\n  color: antiquewhite;\n  font-size: 1rem;\n  position: absolute;\n  top: 2.5rem;\n}\n\n#board-container {\n  display: grid;\n  grid-template: auto / auto auto auto auto ;\n  gap: 10px;\n  box-sizing: border-box;\n}\n\n.fleet {\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n}\n\n.fleet.player {\n  align-items: flex-end;\n}\n\n.vessel {\n  display: flex;\n}\n\n.vessel > div {\n  border: 1px solid var(--border-color);\n  border-top: 2px solid var(--border-color);\n  border-bottom: 2px solid var(--border-color);\n  background-color: var(--ship-color);\n  height: 20px;\n  width: 20px;\n}\n\n.vessel > div:first-child {\n  border-left: 2px solid var(--border-color);\n}\n\n.vessel > div:last-child {\n  border-right: 2px solid var(--border-color);\n}\n\n#gameboard-enemy,\n#gameboard-player {\n  display: grid;\n  grid-template: repeat(10, 45px) / repeat(10, 45px);\n  border: 1px solid var(--border-color);\n  box-shadow: 0 0 5px 2px rgba(0, 0, 0, 0.7);\n  backdrop-filter: blur(50px);\n}\n\n.cell,\n.cell-enemy {\n  border: 1px solid var(--border-color);\n}\n\n.ship {\n  background-color: var(--ship-color);\n}\n\n.hit {\n  background-color: rgb(165, 165, 165);\n}\n\n.hit.ship,\n.hit.ship-enemy {\n  background-color: rgb(145, 36, 36);\n}\n\nfooter {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  align-self: stretch;\n  margin: 15px 50px;\n  color: #faebd7;\n}\n\n.icon {\n  height: 35px;\n  filter: invert(85%) sepia(2%) saturate(1581%) hue-rotate(342deg) brightness(107%) contrast(102%);\n  transition: transform 1.4s ease-in-out;\n  background: url('./github.svg');\n}\n\n.icon:hover {\n  transform: rotate(720deg) scale(1.5);\n}\n\na {\n  color: antiquewhite;\n}\n\n.invalid-drop {\n  background-color: rgb(160, 97, 97);\n}\n\n.valid-drop {\n  background-color: rgb(101, 170, 101);\n}\n"],sourceRoot:""}]);const h=A},645:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),n.push(d))}},n}},667:e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},537:e=>{e.exports=function(e){var n=e[1],t=e[3];if(!t)return n;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(t)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),i="/*# ".concat(o," */");return[n].concat([i]).join("\n")}return[n].join("\n")}},379:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],d=i[l]||0,A="".concat(l," ").concat(d);i[l]=d+1;var p=t(A),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(u);else{var h=o(u,r);r.byIndex=s,n.splice(s,0,{identifier:A,updater:h,references:1})}a.push(A)}return a}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=t(i[a]);n[s].references--}for(var c=r(e,o),l=0;l<i.length;l++){var d=t(i[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}i=c}}},569:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},216:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},565:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},589:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},132:(e,n,t)=>{e.exports=t.p+"5d901c6f515ba7ea18cc.jpg"},685:(e,n,t)=>{e.exports=t.p+"550985caaa8859d4b95f.svg"}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={id:r,exports:{}};return e[r](i,i.exports,t),i.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&!e;)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href,t.nc=void 0,(()=>{var e=t(379),n=t.n(e),r=t(795),o=t.n(r),i=t(569),a=t.n(i),s=t(565),c=t.n(s),l=t(216),d=t.n(l),A=t(589),p=t.n(A),u=t(426),h={};h.styleTagTransform=p(),h.setAttributes=c(),h.insert=a().bind(null,"head"),h.domAPI=o(),h.insertStyleElement=d(),n()(u.Z,h),u.Z&&u.Z.locals&&u.Z.locals,t(132);var f=t(685);const g=t.p+"6c04b34de04769ce6601.svg";class m{constructor(e,n){this.length=e,this.name=n,this.hits=Array(e).fill(!1),this.coordinates=[],this.orientation=null}hit(){const e=this.hits.indexOf(!1);-1!==e&&(this.hits[e]=!0)}isSunk(){return this.hits.every((e=>e))}}class v{constructor(e,n){this.rows=e,this.cols=n,this.grid=this.createEmptyGrid(),this.attackedCells=[],this.sunkenShips=0}createEmptyGrid(){return Array.from({length:this.rows},(()=>Array(this.cols).fill(null)))}isValidPlacement(e,n,t,r){for(let o=0;o<e.length;o++)if("horizontal"===r){if(this.grid[n]&&null!==this.grid[n][t+o])return!1}else if(!this.grid[n+o]||null!==this.grid[n+o][t])return!1;return!0}placeShip(e,n,t,r){if(this.isValidPlacement(e,n,t,r)){e.coordinates=[];for(let o=0;o<e.length;o++)"horizontal"===r?(this.grid[n][t+o]=e,e.coordinates.push(`${n}-${t+o}`)):(this.grid[n+o][t]=e,e.coordinates.push(`${n+o}-${t}`));e.orientation=r}else console.log("Invalid ship placement!")}removeShip(e){for(const n of e.coordinates)this.grid[n[0]][n[2]]=null}receiveAttack(e,n){const t=`${e}-${n}`;if(this.attackedCells.includes(t))return console.log("Already attacked this cell!"),!1;if(this.grid[e]&&null!==this.grid[e][n]){const r=this.grid[e][n];return r.hit(),this.attackedCells.push(t),r.isSunk()&&(this.sunkenShips+=1),!0}return this.attackedCells.push(t),!1}checkVictory(){return this.sunkenShips>=7}display(){console.log(`   ${Array.from({length:this.cols},((e,n)=>n)).join(" ")}`);for(let e=0;e<this.rows;e++){const n=e<10?` ${e}`:e;console.log(`${n} ${this.grid[e].map((e=>e?"X":"-")).join(" ")}`)}}}document.querySelector('link[rel="icon"]').href=g,document.querySelector("img.icon").src=f;const E=document.querySelector("#gameboard-enemy"),C=document.querySelector("#gameboard-player"),b=document.querySelector("#place-fleet"),y=document.querySelector("#start"),x=document.querySelector("#text");let B=new v(10,10),k=new v(10,10),w={},L={};function S(){w={submarine1:new m(1,"submarine1"),submarine2:new m(1,"submarine2"),destroyer1:new m(2,"destroyer1"),destroyer2:new m(2,"destroyer2"),cruiser:new m(3,"cruiser"),battleship:new m(4,"battleship"),carrier:new m(5,"carrier")},L={submarine1Enemy:new m(1),submarine2Enemy:new m(1),destroyer1Enemy:new m(2),destroyer2Enemy:new m(2),cruiserEnemy:new m(3),battleshipEnemy:new m(4),carrierEnemy:new m(5)}}S(),function(){for(let e=0;e<10;e++)for(let n=0;n<10;n++){const t=document.createElement("div");t.classList.add("cell"),t.setAttribute("id",`${e}-${n}`),C.appendChild(t)}}(),function(){for(let e=0;e<10;e++)for(let n=0;n<10;n++){const t=document.createElement("div");t.classList.add("cell-enemy"),t.setAttribute("id",`${e}-${n}-enemy`),E.appendChild(t)}}();const $=document.querySelectorAll(".cell-enemy");function q(e,n=!1){for(let t=0;t<10;t++)for(let r=0;r<10;r++)if(e.grid[t][r]&&!n){const e=document.getElementById(`${t}-${r}`);e.classList.add("ship"),e.draggable=!0}else e.grid[t][r]&&n&&document.getElementById(`${t}-${r}-enemy`).classList.add("ship-enemy")}function I(e,n){for(const t in n){let r=Math.floor(10*Math.random()),o=Math.floor(10*Math.random()),i=["vertical","horizontal"][Math.random()<.5?0:1];for(;!e.isValidPlacement(n[t],r,o,i);)r=Math.floor(10*Math.random()),o=Math.floor(10*Math.random()),i=["vertical","horizontal"][Math.random()<.5?0:1];e.placeShip(n[t],r,o,i)}}function M(e,n=!1){for(const t in e)e[t].isSunk()&&!n?document.querySelector(`.${t}-player`).querySelectorAll("div").forEach((e=>{e.classList.add("hit"),e.classList.add("ship")})):e[t].isSunk()&&n&&document.querySelector(`.${t.slice(0,-5)}-enemy`).querySelectorAll("div").forEach((e=>{e.classList.add("hit"),e.classList.add("ship")}))}function T(e){if(!k.attackedCells.includes(`${e.target.id[0]}-${e.target.id[2]}`)){if(function(e){e.target.classList.add("hit"),k.receiveAttack(e.target.id[0],e.target.id[2]),M(L,!0)}(e),k.checkVictory())return x.innerText="You win!",void $.forEach((e=>e.removeEventListener("click",T)));!function(){let e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());for(;B.attackedCells.includes(`${e}-${n}`);)e=Math.floor(10*Math.random()),n=Math.floor(10*Math.random());document.getElementById(`${e}-${n}`).classList.add("hit"),B.receiveAttack(e,n),M(w)}(),B.checkVictory()&&(x.innerText="You loose!",$.forEach((e=>e.removeEventListener("click",T))))}}I(B,w),q(B),I(k,L),q(k,!0),b.addEventListener("click",(()=>{x.innerText="Place your fleet!",document.querySelector("#tooltip").style.display="block",b.innerText="Random placement",document.querySelectorAll(".hit, .ship, .ship-enemy").forEach((e=>{e.classList.remove("ship"),e.classList.remove("hit"),e.classList.remove("ship-enemy")})),B=new v(10,10),k=new v(10,10),$.forEach((e=>e.removeEventListener("click",T))),S(),I(B,w),I(k,L),q(B),q(k,!0),j.addEventListener("dragstart",P),j.addEventListener("dragover",R),j.addEventListener("dragenter",U),j.addEventListener("dragleave",V),j.addEventListener("drop",G),j.addEventListener("dragend",Z)}));const j=document.querySelector("#gameboard-player");let z;const D={length:null};let Y=[];function P(e){if(e.target.classList.contains("ship")){const n=e.target.id[0],t=e.target.id[2];e.dataTransfer.effectAllowed="move";const r=new Image;r.src="",e.dataTransfer.setDragImage(r,0,0),e.dataTransfer.setData("application/json",JSON.stringify(B.grid[n][t])),D.length=B.grid[n][t].length,z=B.grid[n][t].orientation}else e.preventDefault()}function R(e){e.target.classList.contains("ship")||e.preventDefault()}function U(e){Y=[];const n=parseInt(e.target.id[0],10),t=parseInt(e.target.id[2],10);try{if("vertical"===z)for(let e=0;e<D.length;e++)Y.push(`${n+e}-${t}`);else for(let e=0;e<D.length;e++)Y.push(`${n}-${t+e}`);if(B.isValidPlacement(D,n,t,z))for(const e of Y){const n=document.getElementById(`${e[0]}-${e[2]}`);n.classList.remove("invalid-drop"),n.classList.remove("valid-drop"),n.classList.add("valid-drop")}else for(const e of Y){const n=document.getElementById(`${e[0]}-${e[2]}`);n.classList.remove("invalid-drop"),n.classList.remove("valid-drop"),n.classList.add("invalid-drop")}}catch(e){console.log("Out of range: ",e)}}function V(){document.querySelectorAll(".cell").forEach((e=>{Y.includes(e.id)||(e.classList.remove("invalid-drop"),e.classList.remove("valid-drop"))}))}function G(e){e.preventDefault(),e.dataTransfer.dropEffect="move";const n=JSON.parse(e.dataTransfer.getData("application/json")),t=new m(n.length,n.name),{orientation:r}=n,o=n.coordinates[0][0],i=n.coordinates[0][2],a=parseInt(e.target.id[0],10),s=parseInt(e.target.id[2],10);if(B.isValidPlacement(t,a,s,r)){for(const e of B.grid[o][i].coordinates)document.getElementById(`${e[0]}-${e[2]}`).classList.remove("ship");B.removeShip(B.grid[o][i]),B.placeShip(t,a,s,r),w[t.name].coordinates=B.grid[a][s].coordinates,w[t.name].hits=B.grid[a][s].hits}document.querySelectorAll(".invalid-drop, .valid-drop").forEach((e=>{e.classList.remove("invalid-drop"),e.classList.remove("valid-drop")}))}function Z(){document.querySelectorAll(".invalid-drop, .valid-drop").forEach((e=>{e.classList.remove("invalid-drop"),e.classList.remove("valid-drop")})),q(B)}y.addEventListener("click",(()=>{x.innerText="Game has started!",b.innerText="New game",document.querySelector("#tooltip").style.display="none",$.forEach((e=>e.addEventListener("click",T))),j.removeEventListener("dragstart",P),j.removeEventListener("dragover",R),j.addEventListener("dragenter",U),j.addEventListener("dragleave",V),j.removeEventListener("drop",G),j.removeEventListener("dragend",Z)})),j.addEventListener("dragstart",P),j.addEventListener("dragover",R),j.addEventListener("dragenter",U),j.addEventListener("dragleave",V),j.addEventListener("drop",G),j.addEventListener("dragend",Z),j.addEventListener("dblclick",(e=>{if(e.target.classList.contains("ship")){const n=e.target.id[0],t=e.target.id[2];(function(e){if(function(e){if("horizontal"===e.orientation){const n=parseInt(e.coordinates[0][0],10),t=parseInt(e.coordinates[0][2],10);for(let r=1;r<e.length;r++)if(n+r>9||B.grid[n+r][t])return!1}else{const n=parseInt(e.coordinates[0][0],10),t=parseInt(e.coordinates[0][2],10);for(let r=1;r<e.length;r++)if(t+r>9||B.grid[n][t+r])return!1}return!0}(e)){const n=parseInt(e.coordinates[0][0],10),t=parseInt(e.coordinates[0][2],10);for(const e of B.grid[n][t].coordinates)document.getElementById(`${e[0]}-${e[2]}`).classList.remove("ship");B.removeShip(e),"horizontal"===e.orientation?B.placeShip(e,n,t,"vertical"):B.placeShip(e,n,t,"horizontal"),w[e.name].coordinates=B.grid[n][t].coordinates,w[e.name].hits=B.grid[n][t].hits}})(B.grid[n][t]),q(B)}}))})()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFHLEdBQUksSUFDdkNrQixFQUFNK0UsU0FBU2pGLEVBQUtoQixZQUFZLEdBQUcsR0FBSSxJQUM3QyxJQUFLLE1BQU11QixLQUFjYyxFQUFZM0IsS0FBS08sR0FBS0MsR0FBS2xCLFlBQ2xEdkUsU0FDR3dJLGVBQWUsR0FBRzFDLEVBQVcsTUFBTUEsRUFBVyxNQUM5Q2lDLFVBQVUzSSxPQUFPLFFBRXRCd0gsRUFBWWYsV0FBV04sR0FDRSxlQUFyQkEsRUFBS2YsWUFDUG9DLEVBQVlsQixVQUFVSCxFQUFNQyxFQUFLQyxFQUFLLFlBRXRDbUIsRUFBWWxCLFVBQVVILEVBQU1DLEVBQUtDLEVBQUssY0FFeENxQixFQUFNdkIsRUFBS3BCLE1BQU1JLFlBQWNxQyxFQUFZM0IsS0FBS08sR0FBS0MsR0FBS2xCLFlBQzFEdUMsRUFBTXZCLEVBQUtwQixNQUFNQyxLQUFPd0MsRUFBWTNCLEtBQUtPLEdBQUtDLEdBQUtyQixJQUNyRCxDQUNGLEVBT0k0RyxDQURhcEUsRUFBWTNCLEtBQUtPLEdBQUtDLElBRW5DNEMsRUFBYXpCLEVBQ2YsSSIsInNvdXJjZXMiOlsid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc3R5bGUuY3NzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvZ2V0VXJsLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvc291cmNlTWFwcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRCeVNlbGVjdG9yLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3NldEF0dHJpYnV0ZXNXaXRob3V0QXR0cmlidXRlcy5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVEb21BUEkuanMiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL3N0eWxlVGFnVHJhbnNmb3JtLmpzIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvY29tcGF0IGdldCBkZWZhdWx0IGV4cG9ydCIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL2JhdHRsZXNoaXAvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vYmF0dGxlc2hpcC93ZWJwYWNrL3J1bnRpbWUvanNvbnAgY2h1bmsgbG9hZGluZyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwL3dlYnBhY2svcnVudGltZS9ub25jZSIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL3N0eWxlLmNzcz83MTYzIiwid2VicGFjazovL2JhdHRsZXNoaXAvLi9zcmMvc2hpcC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL2dhbWVib2FyZC5qcyIsIndlYnBhY2s6Ly9iYXR0bGVzaGlwLy4vc3JjL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSW1wb3J0c1xuaW1wb3J0IF9fX0NTU19MT0FERVJfQVBJX1NPVVJDRU1BUF9JTVBPUlRfX18gZnJvbSBcIi4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvcnVudGltZS9zb3VyY2VNYXBzLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9BUElfSU1QT1JUX19fIGZyb20gXCIuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L3J1bnRpbWUvYXBpLmpzXCI7XG5pbXBvcnQgX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyBmcm9tIFwiLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9ydW50aW1lL2dldFVybC5qc1wiO1xudmFyIF9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8wX19fID0gbmV3IFVSTChcIi4vYmF0dGxlc2hpcC5qcGdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMV9fXyA9IG5ldyBVUkwoXCIuL2dpdGh1Yi5zdmdcIiwgaW1wb3J0Lm1ldGEudXJsKTtcbnZhciBfX19DU1NfTE9BREVSX0VYUE9SVF9fXyA9IF9fX0NTU19MT0FERVJfQVBJX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX0FQSV9TT1VSQ0VNQVBfSU1QT1JUX19fKTtcbnZhciBfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fID0gX19fQ1NTX0xPQURFUl9HRVRfVVJMX0lNUE9SVF9fXyhfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyk7XG52YXIgX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyA9IF9fX0NTU19MT0FERVJfR0VUX1VSTF9JTVBPUlRfX18oX19fQ1NTX0xPQURFUl9VUkxfSU1QT1JUXzFfX18pO1xuLy8gTW9kdWxlXG5fX19DU1NfTE9BREVSX0VYUE9SVF9fXy5wdXNoKFttb2R1bGUuaWQsIGAqIHtcbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xufVxuXG46cm9vdCB7XG4gIC0tYm9yZGVyLWNvbG9yOiBhbnRpcXVld2hpdGU7XG4gIC0tc2hpcC1jb2xvcjogcmdiKDc2LCAxODMsIDIyNik7XG59XG5cbmJvZHkge1xuICBoZWlnaHQ6IDk5dmg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYmFja2dyb3VuZDogdXJsKCR7X19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMF9fX30pO1xuICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xuICBiYWNrZ3JvdW5kLXJlcGVhdDogbm8tcmVwZWF0O1xuICBiYWNrZ3JvdW5kLWF0dGFjaG1lbnQ6IGZpeGVkO1xuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiBjZW50ZXI7XG4gIGZvbnQtZmFtaWx5OiAnTHVjaWRhIFNhbnMnLCAnTHVjaWRhIFNhbnMgUmVndWxhcicsICdMdWNpZGEgR3JhbmRlJywgJ0x1Y2lkYSBTYW5zIFVuaWNvZGUnLCBHZW5ldmEsIFZlcmRhbmEsIHNhbnMtc2VyaWY7XG59XG5cbmhlYWRlciB7XG4gIGZvbnQtc2l6ZTogNzBweDtcbiAgbWFyZ2luLXRvcDogNTBweDtcbiAgY29sb3I6IGFudGlxdWV3aGl0ZTtcbiAgdGV4dC1zaGFkb3c6IDVweCA1cHggNHB4IHJnYmEoMCwgMCwgMCwgMC45KTtcbn1cblxuI2NvbnRlbnQge1xuICBkaXNwbGF5OiBmbGV4O1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBnYXA6IDIwcHg7XG59XG5cbiNidXR0b24tY29udGFpbmVyIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24tc2VsZjogY2VudGVyO1xuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICBnYXA6IDMwcHg7XG59XG5cbmJ1dHRvbiB7XG4gIGZvbnQtc2l6ZTogMzBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGJvcmRlci1yYWRpdXM6IDE1cHg7XG4gIGNvbG9yOiBhbnRpcXVld2hpdGU7XG4gIHBhZGRpbmc6IDAgMTBweDtcbiAgd2lkdGg6IDMxMHB4O1xufVxuXG5idXR0b246aG92ZXIge1xuICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuI2hlYWRpbmdzIHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIG1hcmdpbjogMjBweDtcbiAgY29sb3I6IGFudGlxdWV3aGl0ZTtcbiAgZm9udC1zaXplOiAzMHB4O1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG59XG5cbiN0b29sdGlwIHtcbiAgY29sb3I6IGFudGlxdWV3aGl0ZTtcbiAgZm9udC1zaXplOiAxcmVtO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHRvcDogMi41cmVtO1xufVxuXG4jYm9hcmQtY29udGFpbmVyIHtcbiAgZGlzcGxheTogZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZTogYXV0byAvIGF1dG8gYXV0byBhdXRvIGF1dG8gO1xuICBnYXA6IDEwcHg7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG59XG5cbi5mbGVldCB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gIGdhcDogNXB4O1xufVxuXG4uZmxlZXQucGxheWVyIHtcbiAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xufVxuXG4udmVzc2VsIHtcbiAgZGlzcGxheTogZmxleDtcbn1cblxuLnZlc3NlbCA+IGRpdiB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7XG4gIGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpO1xuICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2hpcC1jb2xvcik7XG4gIGhlaWdodDogMjBweDtcbiAgd2lkdGg6IDIwcHg7XG59XG5cbi52ZXNzZWwgPiBkaXY6Zmlyc3QtY2hpbGQge1xuICBib3JkZXItbGVmdDogMnB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7XG59XG5cbi52ZXNzZWwgPiBkaXY6bGFzdC1jaGlsZCB7XG4gIGJvcmRlci1yaWdodDogMnB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7XG59XG5cbiNnYW1lYm9hcmQtZW5lbXksXG4jZ2FtZWJvYXJkLXBsYXllciB7XG4gIGRpc3BsYXk6IGdyaWQ7XG4gIGdyaWQtdGVtcGxhdGU6IHJlcGVhdCgxMCwgNDVweCkgLyByZXBlYXQoMTAsIDQ1cHgpO1xuICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpO1xuICBib3gtc2hhZG93OiAwIDAgNXB4IDJweCByZ2JhKDAsIDAsIDAsIDAuNyk7XG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cig1MHB4KTtcbn1cblxuLmNlbGwsXG4uY2VsbC1lbmVteSB7XG4gIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7XG59XG5cbi5zaGlwIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2hpcC1jb2xvcik7XG59XG5cbi5oaXQge1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTY1LCAxNjUsIDE2NSk7XG59XG5cbi5oaXQuc2hpcCxcbi5oaXQuc2hpcC1lbmVteSB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxNDUsIDM2LCAzNik7XG59XG5cbmZvb3RlciB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgYWxpZ24tc2VsZjogc3RyZXRjaDtcbiAgbWFyZ2luOiAxNXB4IDUwcHg7XG4gIGNvbG9yOiAjZmFlYmQ3O1xufVxuXG4uaWNvbiB7XG4gIGhlaWdodDogMzVweDtcbiAgZmlsdGVyOiBpbnZlcnQoODUlKSBzZXBpYSgyJSkgc2F0dXJhdGUoMTU4MSUpIGh1ZS1yb3RhdGUoMzQyZGVnKSBicmlnaHRuZXNzKDEwNyUpIGNvbnRyYXN0KDEwMiUpO1xuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMS40cyBlYXNlLWluLW91dDtcbiAgYmFja2dyb3VuZDogdXJsKCR7X19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fX30pO1xufVxuXG4uaWNvbjpob3ZlciB7XG4gIHRyYW5zZm9ybTogcm90YXRlKDcyMGRlZykgc2NhbGUoMS41KTtcbn1cblxuYSB7XG4gIGNvbG9yOiBhbnRpcXVld2hpdGU7XG59XG5cbi5pbnZhbGlkLWRyb3Age1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTYwLCA5NywgOTcpO1xufVxuXG4udmFsaWQtZHJvcCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxMDEsIDE3MCwgMTAxKTtcbn1cbmAsIFwiXCIse1widmVyc2lvblwiOjMsXCJzb3VyY2VzXCI6W1wid2VicGFjazovLy4vc3JjL3N0eWxlLmNzc1wiXSxcIm5hbWVzXCI6W10sXCJtYXBwaW5nc1wiOlwiQUFBQTtFQUNFLFNBQVM7RUFDVCxVQUFVO0FBQ1o7O0FBRUE7RUFDRSw0QkFBNEI7RUFDNUIsK0JBQStCO0FBQ2pDOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsOEJBQThCO0VBQzlCLG1CQUFtQjtFQUNuQixtREFBbUM7RUFDbkMsc0JBQXNCO0VBQ3RCLDRCQUE0QjtFQUM1Qiw0QkFBNEI7RUFDNUIsMkJBQTJCO0VBQzNCLHNIQUFzSDtBQUN4SDs7QUFFQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsbUJBQW1CO0VBQ25CLDJDQUEyQztBQUM3Qzs7QUFFQTtFQUNFLGFBQWE7RUFDYixzQkFBc0I7RUFDdEIsU0FBUztBQUNYOztBQUVBO0VBQ0UsYUFBYTtFQUNiLGtCQUFrQjtFQUNsQixzQkFBc0I7RUFDdEIsU0FBUztBQUNYOztBQUVBO0VBQ0UsZUFBZTtFQUNmLDZCQUE2QjtFQUM3QixtQkFBbUI7RUFDbkIsbUJBQW1CO0VBQ25CLGVBQWU7RUFDZixZQUFZO0FBQ2Q7O0FBRUE7RUFDRSxpQkFBaUI7QUFDbkI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLHVCQUF1QjtFQUN2QixZQUFZO0VBQ1osbUJBQW1CO0VBQ25CLGVBQWU7RUFDZixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxtQkFBbUI7RUFDbkIsZUFBZTtFQUNmLGtCQUFrQjtFQUNsQixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsMENBQTBDO0VBQzFDLFNBQVM7RUFDVCxzQkFBc0I7QUFDeEI7O0FBRUE7RUFDRSxhQUFhO0VBQ2Isc0JBQXNCO0VBQ3RCLFFBQVE7QUFDVjs7QUFFQTtFQUNFLHFCQUFxQjtBQUN2Qjs7QUFFQTtFQUNFLGFBQWE7QUFDZjs7QUFFQTtFQUNFLHFDQUFxQztFQUNyQyx5Q0FBeUM7RUFDekMsNENBQTRDO0VBQzVDLG1DQUFtQztFQUNuQyxZQUFZO0VBQ1osV0FBVztBQUNiOztBQUVBO0VBQ0UsMENBQTBDO0FBQzVDOztBQUVBO0VBQ0UsMkNBQTJDO0FBQzdDOztBQUVBOztFQUVFLGFBQWE7RUFDYixrREFBa0Q7RUFDbEQscUNBQXFDO0VBQ3JDLDBDQUEwQztFQUMxQywyQkFBMkI7QUFDN0I7O0FBRUE7O0VBRUUscUNBQXFDO0FBQ3ZDOztBQUVBO0VBQ0UsbUNBQW1DO0FBQ3JDOztBQUVBO0VBQ0Usb0NBQW9DO0FBQ3RDOztBQUVBOztFQUVFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLGFBQWE7RUFDYiw4QkFBOEI7RUFDOUIsbUJBQW1CO0VBQ25CLG1CQUFtQjtFQUNuQixpQkFBaUI7RUFDakIsY0FBYztBQUNoQjs7QUFFQTtFQUNFLFlBQVk7RUFDWixnR0FBZ0c7RUFDaEcsc0NBQXNDO0VBQ3RDLG1EQUErQjtBQUNqQzs7QUFFQTtFQUNFLG9DQUFvQztBQUN0Qzs7QUFFQTtFQUNFLG1CQUFtQjtBQUNyQjs7QUFFQTtFQUNFLGtDQUFrQztBQUNwQzs7QUFFQTtFQUNFLG9DQUFvQztBQUN0Q1wiLFwic291cmNlc0NvbnRlbnRcIjpbXCIqIHtcXG4gIG1hcmdpbjogMDtcXG4gIHBhZGRpbmc6IDA7XFxufVxcblxcbjpyb290IHtcXG4gIC0tYm9yZGVyLWNvbG9yOiBhbnRpcXVld2hpdGU7XFxuICAtLXNoaXAtY29sb3I6IHJnYig3NiwgMTgzLCAyMjYpO1xcbn1cXG5cXG5ib2R5IHtcXG4gIGhlaWdodDogOTl2aDtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGJhY2tncm91bmQ6IHVybCgnLi9iYXR0bGVzaGlwLmpwZycpO1xcbiAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcXG4gIGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7XFxuICBiYWNrZ3JvdW5kLWF0dGFjaG1lbnQ6IGZpeGVkO1xcbiAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyO1xcbiAgZm9udC1mYW1pbHk6ICdMdWNpZGEgU2FucycsICdMdWNpZGEgU2FucyBSZWd1bGFyJywgJ0x1Y2lkYSBHcmFuZGUnLCAnTHVjaWRhIFNhbnMgVW5pY29kZScsIEdlbmV2YSwgVmVyZGFuYSwgc2Fucy1zZXJpZjtcXG59XFxuXFxuaGVhZGVyIHtcXG4gIGZvbnQtc2l6ZTogNzBweDtcXG4gIG1hcmdpbi10b3A6IDUwcHg7XFxuICBjb2xvcjogYW50aXF1ZXdoaXRlO1xcbiAgdGV4dC1zaGFkb3c6IDVweCA1cHggNHB4IHJnYmEoMCwgMCwgMCwgMC45KTtcXG59XFxuXFxuI2NvbnRlbnQge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XFxuICBnYXA6IDIwcHg7XFxufVxcblxcbiNidXR0b24tY29udGFpbmVyIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBhbGlnbi1zZWxmOiBjZW50ZXI7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgZ2FwOiAzMHB4O1xcbn1cXG5cXG5idXR0b24ge1xcbiAgZm9udC1zaXplOiAzMHB4O1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XFxuICBib3JkZXItcmFkaXVzOiAxNXB4O1xcbiAgY29sb3I6IGFudGlxdWV3aGl0ZTtcXG4gIHBhZGRpbmc6IDAgMTBweDtcXG4gIHdpZHRoOiAzMTBweDtcXG59XFxuXFxuYnV0dG9uOmhvdmVyIHtcXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xcbn1cXG5cXG4jaGVhZGluZ3Mge1xcbiAgZGlzcGxheTogZmxleDtcXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XFxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcXG4gIG1hcmdpbjogMjBweDtcXG4gIGNvbG9yOiBhbnRpcXVld2hpdGU7XFxuICBmb250LXNpemU6IDMwcHg7XFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XFxufVxcblxcbiN0b29sdGlwIHtcXG4gIGNvbG9yOiBhbnRpcXVld2hpdGU7XFxuICBmb250LXNpemU6IDFyZW07XFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XFxuICB0b3A6IDIuNXJlbTtcXG59XFxuXFxuI2JvYXJkLWNvbnRhaW5lciB7XFxuICBkaXNwbGF5OiBncmlkO1xcbiAgZ3JpZC10ZW1wbGF0ZTogYXV0byAvIGF1dG8gYXV0byBhdXRvIGF1dG8gO1xcbiAgZ2FwOiAxMHB4O1xcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcXG59XFxuXFxuLmZsZWV0IHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxuICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xcbiAgZ2FwOiA1cHg7XFxufVxcblxcbi5mbGVldC5wbGF5ZXIge1xcbiAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xcbn1cXG5cXG4udmVzc2VsIHtcXG4gIGRpc3BsYXk6IGZsZXg7XFxufVxcblxcbi52ZXNzZWwgPiBkaXYge1xcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTtcXG4gIGJvcmRlci10b3A6IDJweCBzb2xpZCB2YXIoLS1ib3JkZXItY29sb3IpO1xcbiAgYm9yZGVyLWJvdHRvbTogMnB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7XFxuICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1zaGlwLWNvbG9yKTtcXG4gIGhlaWdodDogMjBweDtcXG4gIHdpZHRoOiAyMHB4O1xcbn1cXG5cXG4udmVzc2VsID4gZGl2OmZpcnN0LWNoaWxkIHtcXG4gIGJvcmRlci1sZWZ0OiAycHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTtcXG59XFxuXFxuLnZlc3NlbCA+IGRpdjpsYXN0LWNoaWxkIHtcXG4gIGJvcmRlci1yaWdodDogMnB4IHNvbGlkIHZhcigtLWJvcmRlci1jb2xvcik7XFxufVxcblxcbiNnYW1lYm9hcmQtZW5lbXksXFxuI2dhbWVib2FyZC1wbGF5ZXIge1xcbiAgZGlzcGxheTogZ3JpZDtcXG4gIGdyaWQtdGVtcGxhdGU6IHJlcGVhdCgxMCwgNDVweCkgLyByZXBlYXQoMTAsIDQ1cHgpO1xcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTtcXG4gIGJveC1zaGFkb3c6IDAgMCA1cHggMnB4IHJnYmEoMCwgMCwgMCwgMC43KTtcXG4gIGJhY2tkcm9wLWZpbHRlcjogYmx1cig1MHB4KTtcXG59XFxuXFxuLmNlbGwsXFxuLmNlbGwtZW5lbXkge1xcbiAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9yZGVyLWNvbG9yKTtcXG59XFxuXFxuLnNoaXAge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tc2hpcC1jb2xvcik7XFxufVxcblxcbi5oaXQge1xcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDE2NSwgMTY1LCAxNjUpO1xcbn1cXG5cXG4uaGl0LnNoaXAsXFxuLmhpdC5zaGlwLWVuZW15IHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxNDUsIDM2LCAzNik7XFxufVxcblxcbmZvb3RlciB7XFxuICBkaXNwbGF5OiBmbGV4O1xcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcXG4gIGFsaWduLXNlbGY6IHN0cmV0Y2g7XFxuICBtYXJnaW46IDE1cHggNTBweDtcXG4gIGNvbG9yOiAjZmFlYmQ3O1xcbn1cXG5cXG4uaWNvbiB7XFxuICBoZWlnaHQ6IDM1cHg7XFxuICBmaWx0ZXI6IGludmVydCg4NSUpIHNlcGlhKDIlKSBzYXR1cmF0ZSgxNTgxJSkgaHVlLXJvdGF0ZSgzNDJkZWcpIGJyaWdodG5lc3MoMTA3JSkgY29udHJhc3QoMTAyJSk7XFxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMS40cyBlYXNlLWluLW91dDtcXG4gIGJhY2tncm91bmQ6IHVybCgnLi9naXRodWIuc3ZnJyk7XFxufVxcblxcbi5pY29uOmhvdmVyIHtcXG4gIHRyYW5zZm9ybTogcm90YXRlKDcyMGRlZykgc2NhbGUoMS41KTtcXG59XFxuXFxuYSB7XFxuICBjb2xvcjogYW50aXF1ZXdoaXRlO1xcbn1cXG5cXG4uaW52YWxpZC1kcm9wIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxNjAsIDk3LCA5Nyk7XFxufVxcblxcbi52YWxpZC1kcm9wIHtcXG4gIGJhY2tncm91bmQtY29sb3I6IHJnYigxMDEsIDE3MCwgMTAxKTtcXG59XFxuXCJdLFwic291cmNlUm9vdFwiOlwiXCJ9XSk7XG4vLyBFeHBvcnRzXG5leHBvcnQgZGVmYXVsdCBfX19DU1NfTE9BREVSX0VYUE9SVF9fXztcbiIsIlwidXNlIHN0cmljdFwiO1xuXG4vKlxuICBNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuICBBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoY3NzV2l0aE1hcHBpbmdUb1N0cmluZykge1xuICB2YXIgbGlzdCA9IFtdO1xuXG4gIC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcbiAgbGlzdC50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgdmFyIGNvbnRlbnQgPSBcIlwiO1xuICAgICAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBpdGVtWzVdICE9PSBcInVuZGVmaW5lZFwiO1xuICAgICAgaWYgKGl0ZW1bNF0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIkBtZWRpYSBcIi5jb25jYXQoaXRlbVsyXSwgXCIge1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChuZWVkTGF5ZXIpIHtcbiAgICAgICAgY29udGVudCArPSBcIkBsYXllclwiLmNvbmNhdChpdGVtWzVdLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQoaXRlbVs1XSkgOiBcIlwiLCBcIiB7XCIpO1xuICAgICAgfVxuICAgICAgY29udGVudCArPSBjc3NXaXRoTWFwcGluZ1RvU3RyaW5nKGl0ZW0pO1xuICAgICAgaWYgKG5lZWRMYXllcikge1xuICAgICAgICBjb250ZW50ICs9IFwifVwiO1xuICAgICAgfVxuICAgICAgaWYgKGl0ZW1bMl0pIHtcbiAgICAgICAgY29udGVudCArPSBcIn1cIjtcbiAgICAgIH1cbiAgICAgIGlmIChpdGVtWzRdKSB7XG4gICAgICAgIGNvbnRlbnQgKz0gXCJ9XCI7XG4gICAgICB9XG4gICAgICByZXR1cm4gY29udGVudDtcbiAgICB9KS5qb2luKFwiXCIpO1xuICB9O1xuXG4gIC8vIGltcG9ydCBhIGxpc3Qgb2YgbW9kdWxlcyBpbnRvIHRoZSBsaXN0XG4gIGxpc3QuaSA9IGZ1bmN0aW9uIGkobW9kdWxlcywgbWVkaWEsIGRlZHVwZSwgc3VwcG9ydHMsIGxheWVyKSB7XG4gICAgaWYgKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCB1bmRlZmluZWRdXTtcbiAgICB9XG4gICAgdmFyIGFscmVhZHlJbXBvcnRlZE1vZHVsZXMgPSB7fTtcbiAgICBpZiAoZGVkdXBlKSB7XG4gICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGlkID0gdGhpc1trXVswXTtcbiAgICAgICAgaWYgKGlkICE9IG51bGwpIHtcbiAgICAgICAgICBhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2lkXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICh2YXIgX2sgPSAwOyBfayA8IG1vZHVsZXMubGVuZ3RoOyBfaysrKSB7XG4gICAgICB2YXIgaXRlbSA9IFtdLmNvbmNhdChtb2R1bGVzW19rXSk7XG4gICAgICBpZiAoZGVkdXBlICYmIGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaXRlbVswXV0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIGxheWVyICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgaXRlbVs1XSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbGF5ZXJcIi5jb25jYXQoaXRlbVs1XS5sZW5ndGggPiAwID8gXCIgXCIuY29uY2F0KGl0ZW1bNV0pIDogXCJcIiwgXCIge1wiKS5jb25jYXQoaXRlbVsxXSwgXCJ9XCIpO1xuICAgICAgICAgIGl0ZW1bNV0gPSBsYXllcjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKG1lZGlhKSB7XG4gICAgICAgIGlmICghaXRlbVsyXSkge1xuICAgICAgICAgIGl0ZW1bMl0gPSBtZWRpYTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpdGVtWzFdID0gXCJAbWVkaWEgXCIuY29uY2F0KGl0ZW1bMl0sIFwiIHtcIikuY29uY2F0KGl0ZW1bMV0sIFwifVwiKTtcbiAgICAgICAgICBpdGVtWzJdID0gbWVkaWE7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChzdXBwb3J0cykge1xuICAgICAgICBpZiAoIWl0ZW1bNF0pIHtcbiAgICAgICAgICBpdGVtWzRdID0gXCJcIi5jb25jYXQoc3VwcG9ydHMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1bMV0gPSBcIkBzdXBwb3J0cyAoXCIuY29uY2F0KGl0ZW1bNF0sIFwiKSB7XCIpLmNvbmNhdChpdGVtWzFdLCBcIn1cIik7XG4gICAgICAgICAgaXRlbVs0XSA9IHN1cHBvcnRzO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBsaXN0LnB1c2goaXRlbSk7XG4gICAgfVxuICB9O1xuICByZXR1cm4gbGlzdDtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xuICBpZiAoIW9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0ge307XG4gIH1cbiAgaWYgKCF1cmwpIHtcbiAgICByZXR1cm4gdXJsO1xuICB9XG4gIHVybCA9IFN0cmluZyh1cmwuX19lc01vZHVsZSA/IHVybC5kZWZhdWx0IDogdXJsKTtcblxuICAvLyBJZiB1cmwgaXMgYWxyZWFkeSB3cmFwcGVkIGluIHF1b3RlcywgcmVtb3ZlIHRoZW1cbiAgaWYgKC9eWydcIl0uKlsnXCJdJC8udGVzdCh1cmwpKSB7XG4gICAgdXJsID0gdXJsLnNsaWNlKDEsIC0xKTtcbiAgfVxuICBpZiAob3B0aW9ucy5oYXNoKSB7XG4gICAgdXJsICs9IG9wdGlvbnMuaGFzaDtcbiAgfVxuXG4gIC8vIFNob3VsZCB1cmwgYmUgd3JhcHBlZD9cbiAgLy8gU2VlIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3MtdmFsdWVzLTMvI3VybHNcbiAgaWYgKC9bXCInKCkgXFx0XFxuXXwoJTIwKS8udGVzdCh1cmwpIHx8IG9wdGlvbnMubmVlZFF1b3Rlcykge1xuICAgIHJldHVybiBcIlxcXCJcIi5jb25jYXQodXJsLnJlcGxhY2UoL1wiL2csICdcXFxcXCInKS5yZXBsYWNlKC9cXG4vZywgXCJcXFxcblwiKSwgXCJcXFwiXCIpO1xuICB9XG4gIHJldHVybiB1cmw7XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gIHZhciBjb250ZW50ID0gaXRlbVsxXTtcbiAgdmFyIGNzc01hcHBpbmcgPSBpdGVtWzNdO1xuICBpZiAoIWNzc01hcHBpbmcpIHtcbiAgICByZXR1cm4gY29udGVudDtcbiAgfVxuICBpZiAodHlwZW9mIGJ0b2EgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHZhciBiYXNlNjQgPSBidG9hKHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChKU09OLnN0cmluZ2lmeShjc3NNYXBwaW5nKSkpKTtcbiAgICB2YXIgZGF0YSA9IFwic291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247Y2hhcnNldD11dGYtODtiYXNlNjQsXCIuY29uY2F0KGJhc2U2NCk7XG4gICAgdmFyIHNvdXJjZU1hcHBpbmcgPSBcIi8qIyBcIi5jb25jYXQoZGF0YSwgXCIgKi9cIik7XG4gICAgcmV0dXJuIFtjb250ZW50XS5jb25jYXQoW3NvdXJjZU1hcHBpbmddKS5qb2luKFwiXFxuXCIpO1xuICB9XG4gIHJldHVybiBbY29udGVudF0uam9pbihcIlxcblwiKTtcbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBzdHlsZXNJbkRPTSA9IFtdO1xuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5ET00ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5ET01baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleEJ5SWRlbnRpZmllciA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXSxcbiAgICAgIHN1cHBvcnRzOiBpdGVtWzRdLFxuICAgICAgbGF5ZXI6IGl0ZW1bNV1cbiAgICB9O1xuICAgIGlmIChpbmRleEJ5SWRlbnRpZmllciAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRE9NW2luZGV4QnlJZGVudGlmaWVyXS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleEJ5SWRlbnRpZmllcl0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdXBkYXRlciA9IGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpO1xuICAgICAgb3B0aW9ucy5ieUluZGV4ID0gaTtcbiAgICAgIHN0eWxlc0luRE9NLnNwbGljZShpLCAwLCB7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IHVwZGF0ZXIsXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZGVudGlmaWVycy5wdXNoKGlkZW50aWZpZXIpO1xuICB9XG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cbmZ1bmN0aW9uIGFkZEVsZW1lbnRTdHlsZShvYmosIG9wdGlvbnMpIHtcbiAgdmFyIGFwaSA9IG9wdGlvbnMuZG9tQVBJKG9wdGlvbnMpO1xuICBhcGkudXBkYXRlKG9iaik7XG4gIHZhciB1cGRhdGVyID0gZnVuY3Rpb24gdXBkYXRlcihuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwICYmIG5ld09iai5zdXBwb3J0cyA9PT0gb2JqLnN1cHBvcnRzICYmIG5ld09iai5sYXllciA9PT0gb2JqLmxheWVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGFwaS51cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgYXBpLnJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbiAgcmV0dXJuIHVwZGF0ZXI7XG59XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRPTVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cbiAgICB2YXIgbmV3TGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKG5ld0xpc3QsIG9wdGlvbnMpO1xuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcbiAgICAgIGlmIChzdHlsZXNJbkRPTVtfaW5kZXhdLnJlZmVyZW5jZXMgPT09IDApIHtcbiAgICAgICAgc3R5bGVzSW5ET01bX2luZGV4XS51cGRhdGVyKCk7XG4gICAgICAgIHN0eWxlc0luRE9NLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgbWVtbyA9IHt9O1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGdldFRhcmdldCh0YXJnZXQpIHtcbiAgaWYgKHR5cGVvZiBtZW1vW3RhcmdldF0gPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB2YXIgc3R5bGVUYXJnZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRhcmdldCk7XG5cbiAgICAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuICAgIGlmICh3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQgJiYgc3R5bGVUYXJnZXQgaW5zdGFuY2VvZiB3aW5kb3cuSFRNTElGcmFtZUVsZW1lbnQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgIC8vIGR1ZSB0byBjcm9zcy1vcmlnaW4gcmVzdHJpY3Rpb25zXG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0XG4gICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gIH1cbiAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbn1cblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRCeVNlbGVjdG9yKGluc2VydCwgc3R5bGUpIHtcbiAgdmFyIHRhcmdldCA9IGdldFRhcmdldChpbnNlcnQpO1xuICBpZiAoIXRhcmdldCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkNvdWxkbid0IGZpbmQgYSBzdHlsZSB0YXJnZXQuIFRoaXMgcHJvYmFibHkgbWVhbnMgdGhhdCB0aGUgdmFsdWUgZm9yIHRoZSAnaW5zZXJ0JyBwYXJhbWV0ZXIgaXMgaW52YWxpZC5cIik7XG4gIH1cbiAgdGFyZ2V0LmFwcGVuZENoaWxkKHN0eWxlKTtcbn1cbm1vZHVsZS5leHBvcnRzID0gaW5zZXJ0QnlTZWxlY3RvcjsiLCJcInVzZSBzdHJpY3RcIjtcblxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgICovXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgb3B0aW9ucy5zZXRBdHRyaWJ1dGVzKGVsZW1lbnQsIG9wdGlvbnMuYXR0cmlidXRlcyk7XG4gIG9wdGlvbnMuaW5zZXJ0KGVsZW1lbnQsIG9wdGlvbnMub3B0aW9ucyk7XG4gIHJldHVybiBlbGVtZW50O1xufVxubW9kdWxlLmV4cG9ydHMgPSBpbnNlcnRTdHlsZUVsZW1lbnQ7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzKHN0eWxlRWxlbWVudCkge1xuICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09IFwidW5kZWZpbmVkXCIgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG4gIGlmIChub25jZSkge1xuICAgIHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJub25jZVwiLCBub25jZSk7XG4gIH1cbn1cbm1vZHVsZS5leHBvcnRzID0gc2V0QXR0cmlidXRlc1dpdGhvdXRBdHRyaWJ1dGVzOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBcIlwiO1xuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwiQHN1cHBvcnRzIChcIi5jb25jYXQob2JqLnN1cHBvcnRzLCBcIikge1wiKTtcbiAgfVxuICBpZiAob2JqLm1lZGlhKSB7XG4gICAgY3NzICs9IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIik7XG4gIH1cbiAgdmFyIG5lZWRMYXllciA9IHR5cGVvZiBvYmoubGF5ZXIgIT09IFwidW5kZWZpbmVkXCI7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJAbGF5ZXJcIi5jb25jYXQob2JqLmxheWVyLmxlbmd0aCA+IDAgPyBcIiBcIi5jb25jYXQob2JqLmxheWVyKSA6IFwiXCIsIFwiIHtcIik7XG4gIH1cbiAgY3NzICs9IG9iai5jc3M7XG4gIGlmIChuZWVkTGF5ZXIpIHtcbiAgICBjc3MgKz0gXCJ9XCI7XG4gIH1cbiAgaWYgKG9iai5tZWRpYSkge1xuICAgIGNzcyArPSBcIn1cIjtcbiAgfVxuICBpZiAob2JqLnN1cHBvcnRzKSB7XG4gICAgY3NzICs9IFwifVwiO1xuICB9XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuICBpZiAoc291cmNlTWFwICYmIHR5cGVvZiBidG9hICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH1cblxuICAvLyBGb3Igb2xkIElFXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cbiAgb3B0aW9ucy5zdHlsZVRhZ1RyYW5zZm9ybShjc3MsIHN0eWxlRWxlbWVudCwgb3B0aW9ucy5vcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZUVsZW1lbnQpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZUVsZW1lbnQucGFyZW50Tm9kZSA9PT0gbnVsbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xufVxuXG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cbmZ1bmN0aW9uIGRvbUFQSShvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgZG9jdW1lbnQgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7fSxcbiAgICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge31cbiAgICB9O1xuICB9XG4gIHZhciBzdHlsZUVsZW1lbnQgPSBvcHRpb25zLmluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgcmV0dXJuIHtcbiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShvYmopIHtcbiAgICAgIGFwcGx5KHN0eWxlRWxlbWVudCwgb3B0aW9ucywgb2JqKTtcbiAgICB9LFxuICAgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCk7XG4gICAgfVxuICB9O1xufVxubW9kdWxlLmV4cG9ydHMgPSBkb21BUEk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuZnVuY3Rpb24gc3R5bGVUYWdUcmFuc2Zvcm0oY3NzLCBzdHlsZUVsZW1lbnQpIHtcbiAgaWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpIHtcbiAgICAgIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG4gICAgfVxuICAgIHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxubW9kdWxlLmV4cG9ydHMgPSBzdHlsZVRhZ1RyYW5zZm9ybTsiLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdGlkOiBtb2R1bGVJZCxcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuLy8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbl9fd2VicGFja19yZXF1aXJlX18ubSA9IF9fd2VicGFja19tb2R1bGVzX187XG5cbiIsIi8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSAobW9kdWxlKSA9PiB7XG5cdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuXHRcdCgpID0+IChtb2R1bGVbJ2RlZmF1bHQnXSkgOlxuXHRcdCgpID0+IChtb2R1bGUpO1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCB7IGE6IGdldHRlciB9KTtcblx0cmV0dXJuIGdldHRlcjtcbn07IiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwidmFyIHNjcmlwdFVybDtcbmlmIChfX3dlYnBhY2tfcmVxdWlyZV9fLmcuaW1wb3J0U2NyaXB0cykgc2NyaXB0VXJsID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmxvY2F0aW9uICsgXCJcIjtcbnZhciBkb2N1bWVudCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5kb2N1bWVudDtcbmlmICghc2NyaXB0VXJsICYmIGRvY3VtZW50KSB7XG5cdGlmIChkb2N1bWVudC5jdXJyZW50U2NyaXB0KVxuXHRcdHNjcmlwdFVybCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQuc3JjO1xuXHRpZiAoIXNjcmlwdFVybCkge1xuXHRcdHZhciBzY3JpcHRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIik7XG5cdFx0aWYoc2NyaXB0cy5sZW5ndGgpIHtcblx0XHRcdHZhciBpID0gc2NyaXB0cy5sZW5ndGggLSAxO1xuXHRcdFx0d2hpbGUgKGkgPiAtMSAmJiAhc2NyaXB0VXJsKSBzY3JpcHRVcmwgPSBzY3JpcHRzW2ktLV0uc3JjO1xuXHRcdH1cblx0fVxufVxuLy8gV2hlbiBzdXBwb3J0aW5nIGJyb3dzZXJzIHdoZXJlIGFuIGF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgeW91IG11c3Qgc3BlY2lmeSBhbiBvdXRwdXQucHVibGljUGF0aCBtYW51YWxseSB2aWEgY29uZmlndXJhdGlvblxuLy8gb3IgcGFzcyBhbiBlbXB0eSBzdHJpbmcgKFwiXCIpIGFuZCBzZXQgdGhlIF9fd2VicGFja19wdWJsaWNfcGF0aF9fIHZhcmlhYmxlIGZyb20geW91ciBjb2RlIHRvIHVzZSB5b3VyIG93biBsb2dpYy5cbmlmICghc2NyaXB0VXJsKSB0aHJvdyBuZXcgRXJyb3IoXCJBdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIGluIHRoaXMgYnJvd3NlclwiKTtcbnNjcmlwdFVybCA9IHNjcmlwdFVybC5yZXBsYWNlKC8jLiokLywgXCJcIikucmVwbGFjZSgvXFw/LiokLywgXCJcIikucmVwbGFjZSgvXFwvW15cXC9dKyQvLCBcIi9cIik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBzY3JpcHRVcmw7IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5iID0gZG9jdW1lbnQuYmFzZVVSSSB8fCBzZWxmLmxvY2F0aW9uLmhyZWY7XG5cbi8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4vLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbi8vIFtyZXNvbHZlLCByZWplY3QsIFByb21pc2VdID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxudmFyIGluc3RhbGxlZENodW5rcyA9IHtcblx0ODI2OiAwXG59O1xuXG4vLyBubyBjaHVuayBvbiBkZW1hbmQgbG9hZGluZ1xuXG4vLyBubyBwcmVmZXRjaGluZ1xuXG4vLyBubyBwcmVsb2FkZWRcblxuLy8gbm8gSE1SXG5cbi8vIG5vIEhNUiBtYW5pZmVzdFxuXG4vLyBubyBvbiBjaHVua3MgbG9hZGVkXG5cbi8vIG5vIGpzb25wIGZ1bmN0aW9uIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5uYyA9IHVuZGVmaW5lZDsiLCJcbiAgICAgIGltcG9ydCBBUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIjtcbiAgICAgIGltcG9ydCBkb21BUEkgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zdHlsZURvbUFQSS5qc1wiO1xuICAgICAgaW1wb3J0IGluc2VydEZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5zZXJ0QnlTZWxlY3Rvci5qc1wiO1xuICAgICAgaW1wb3J0IHNldEF0dHJpYnV0ZXMgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9zZXRBdHRyaWJ1dGVzV2l0aG91dEF0dHJpYnV0ZXMuanNcIjtcbiAgICAgIGltcG9ydCBpbnNlcnRTdHlsZUVsZW1lbnQgZnJvbSBcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbnNlcnRTdHlsZUVsZW1lbnQuanNcIjtcbiAgICAgIGltcG9ydCBzdHlsZVRhZ1RyYW5zZm9ybUZuIGZyb20gXCIhLi4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvc3R5bGVUYWdUcmFuc2Zvcm0uanNcIjtcbiAgICAgIGltcG9ydCBjb250ZW50LCAqIGFzIG5hbWVkRXhwb3J0IGZyb20gXCIhIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vc3R5bGUuY3NzXCI7XG4gICAgICBcbiAgICAgIFxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLnN0eWxlVGFnVHJhbnNmb3JtID0gc3R5bGVUYWdUcmFuc2Zvcm1Gbjtcbm9wdGlvbnMuc2V0QXR0cmlidXRlcyA9IHNldEF0dHJpYnV0ZXM7XG5cbiAgICAgIG9wdGlvbnMuaW5zZXJ0ID0gaW5zZXJ0Rm4uYmluZChudWxsLCBcImhlYWRcIik7XG4gICAgXG5vcHRpb25zLmRvbUFQSSA9IGRvbUFQSTtcbm9wdGlvbnMuaW5zZXJ0U3R5bGVFbGVtZW50ID0gaW5zZXJ0U3R5bGVFbGVtZW50O1xuXG52YXIgdXBkYXRlID0gQVBJKGNvbnRlbnQsIG9wdGlvbnMpO1xuXG5cblxuZXhwb3J0ICogZnJvbSBcIiEhLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvZGlzdC9janMuanMhLi9zdHlsZS5jc3NcIjtcbiAgICAgICBleHBvcnQgZGVmYXVsdCBjb250ZW50ICYmIGNvbnRlbnQubG9jYWxzID8gY29udGVudC5sb2NhbHMgOiB1bmRlZmluZWQ7XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTaGlwIHtcbiAgY29uc3RydWN0b3IobGVuZ3RoLCBuYW1lKSB7XG4gICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmhpdHMgPSBBcnJheShsZW5ndGgpLmZpbGwoZmFsc2UpO1xuICAgIHRoaXMuY29vcmRpbmF0ZXMgPSBbXTtcbiAgICB0aGlzLm9yaWVudGF0aW9uID0gbnVsbDtcbiAgfVxuXG4gIGhpdCgpIHtcbiAgICBjb25zdCBmaXJzdFVuaGl0SW5kZXggPSB0aGlzLmhpdHMuaW5kZXhPZihmYWxzZSk7XG4gICAgaWYgKGZpcnN0VW5oaXRJbmRleCAhPT0gLTEpIHtcbiAgICAgIHRoaXMuaGl0c1tmaXJzdFVuaGl0SW5kZXhdID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICBpc1N1bmsoKSB7XG4gICAgcmV0dXJuIHRoaXMuaGl0cy5ldmVyeSgoaGl0KSA9PiBoaXQpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBHYW1lYm9hcmQge1xuICBjb25zdHJ1Y3Rvcihyb3dzLCBjb2xzKSB7XG4gICAgdGhpcy5yb3dzID0gcm93cztcbiAgICB0aGlzLmNvbHMgPSBjb2xzO1xuICAgIHRoaXMuZ3JpZCA9IHRoaXMuY3JlYXRlRW1wdHlHcmlkKCk7XG4gICAgdGhpcy5hdHRhY2tlZENlbGxzID0gW107XG4gICAgdGhpcy5zdW5rZW5TaGlwcyA9IDA7XG4gIH1cblxuICBjcmVhdGVFbXB0eUdyaWQoKSB7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGg6IHRoaXMucm93cyB9LCAoKSA9PiBBcnJheSh0aGlzLmNvbHMpLmZpbGwobnVsbCkpO1xuICB9XG5cbiAgaXNWYWxpZFBsYWNlbWVudChzaGlwLCByb3csIGNvbCwgb3JpZW50YXRpb24pIHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gXCJob3Jpem9udGFsXCIpIHtcbiAgICAgICAgLyogY2hlY2tzIGlmIHRoZSByb3cgZXhpc3RzIChpcyBub3QgXG4gICAgICAgICAgdW5kZWZpbmVkKSAtIGlzIHdpdGhpbiB0aGUgYm9hcmQgKi9cbiAgICAgICAgaWYgKHRoaXMuZ3JpZFtyb3ddICYmIHRoaXMuZ3JpZFtyb3ddW2NvbCArIGldICE9PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCF0aGlzLmdyaWRbcm93ICsgaV0gfHwgdGhpcy5ncmlkW3JvdyArIGldW2NvbF0gIT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHBsYWNlU2hpcChzaGlwLCByb3csIGNvbCwgb3JpZW50YXRpb24pIHtcbiAgICBjb25zdCBpc1ZhbGlkUGxhY2VtZW50ID0gdGhpcy5pc1ZhbGlkUGxhY2VtZW50KHNoaXAsIHJvdywgY29sLCBvcmllbnRhdGlvbik7XG4gICAgaWYgKGlzVmFsaWRQbGFjZW1lbnQpIHtcbiAgICAgIHNoaXAuY29vcmRpbmF0ZXMgPSBbXTtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAob3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiKSB7XG4gICAgICAgICAgdGhpcy5ncmlkW3Jvd11bY29sICsgaV0gPSBzaGlwO1xuICAgICAgICAgIHNoaXAuY29vcmRpbmF0ZXMucHVzaChgJHtyb3d9LSR7Y29sICsgaX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmdyaWRbcm93ICsgaV1bY29sXSA9IHNoaXA7XG4gICAgICAgICAgc2hpcC5jb29yZGluYXRlcy5wdXNoKGAke3JvdyArIGl9LSR7Y29sfWApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzaGlwLm9yaWVudGF0aW9uID0gb3JpZW50YXRpb247XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiSW52YWxpZCBzaGlwIHBsYWNlbWVudCFcIik7XG4gICAgfVxuICB9XG5cbiAgcmVtb3ZlU2hpcChzaGlwKSB7XG4gICAgZm9yIChjb25zdCBjb29yZGluYXRlIG9mIHNoaXAuY29vcmRpbmF0ZXMpIHtcbiAgICAgIHRoaXMuZ3JpZFtjb29yZGluYXRlWzBdXVtjb29yZGluYXRlWzJdXSA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcmVjZWl2ZUF0dGFjayhyb3csIGNvbCkge1xuICAgIGNvbnN0IGNlbGxDb29yZGluYXRlcyA9IGAke3Jvd30tJHtjb2x9YDtcbiAgICBpZiAodGhpcy5hdHRhY2tlZENlbGxzLmluY2x1ZGVzKGNlbGxDb29yZGluYXRlcykpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQWxyZWFkeSBhdHRhY2tlZCB0aGlzIGNlbGwhXCIpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGhpcy5ncmlkW3Jvd10gJiYgdGhpcy5ncmlkW3Jvd11bY29sXSAhPT0gbnVsbCkge1xuICAgICAgY29uc3Qgc2hpcCA9IHRoaXMuZ3JpZFtyb3ddW2NvbF07XG4gICAgICBzaGlwLmhpdCgpO1xuICAgICAgdGhpcy5hdHRhY2tlZENlbGxzLnB1c2goY2VsbENvb3JkaW5hdGVzKTtcbiAgICAgIGlmIChzaGlwLmlzU3VuaygpKSB7XG4gICAgICAgIHRoaXMuc3Vua2VuU2hpcHMgKz0gMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLmF0dGFja2VkQ2VsbHMucHVzaChjZWxsQ29vcmRpbmF0ZXMpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGNoZWNrVmljdG9yeSgpIHtcbiAgICByZXR1cm4gdGhpcy5zdW5rZW5TaGlwcyA+PSA3O1xuICB9XG5cbiAgZGlzcGxheSgpIHtcbiAgICAvLyBEaXNwbGF5IGNvbHVtbiBudW1iZXIgb24gdGhlIHRvcCBlZGdlXG4gICAgY29uc29sZS5sb2coXG4gICAgICBgICAgJHtBcnJheS5mcm9tKHsgbGVuZ3RoOiB0aGlzLmNvbHMgfSwgKF8sIGluZGV4KSA9PiBpbmRleCkuam9pbihcIiBcIil9YCxcbiAgICApO1xuICAgIGZvciAobGV0IHJvdyA9IDA7IHJvdyA8IHRoaXMucm93czsgcm93KyspIHtcbiAgICAgIC8vIERpc3BsYXkgcm93IG51bWJlciBvbiB0aGUgbGVmdCBlZGdlXG4gICAgICBjb25zdCByb3dOdW1iZXIgPSByb3cgPCAxMCA/IGAgJHtyb3d9YCA6IHJvdztcbiAgICAgIGNvbnNvbGUubG9nKFxuICAgICAgICBgJHtyb3dOdW1iZXJ9ICR7dGhpcy5ncmlkW3Jvd11cbiAgICAgICAgICAubWFwKChjZWxsKSA9PiAoY2VsbCA/IFwiWFwiIDogXCItXCIpKVxuICAgICAgICAgIC5qb2luKFwiIFwiKX1gLFxuICAgICAgKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBcIi4vc3R5bGUuY3NzXCI7XG5pbXBvcnQgQmF0dGxlc2hpcCBmcm9tIFwiLi9iYXR0bGVzaGlwLmpwZ1wiO1xuaW1wb3J0IEdpdGh1YiBmcm9tIFwiLi9naXRodWIuc3ZnXCI7XG5pbXBvcnQgZmF2aWNvbiBmcm9tIFwiLi9mYXZpY29uLnN2Z1wiO1xuaW1wb3J0IFNoaXAgZnJvbSBcIi4vc2hpcFwiO1xuaW1wb3J0IEdhbWVib2FyZCBmcm9tIFwiLi9nYW1lYm9hcmRcIjtcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbGlua1tyZWw9XCJpY29uXCJdJykuaHJlZiA9IGZhdmljb247XG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW1nLmljb25cIikuc3JjID0gR2l0aHViO1xuXG5jb25zdCBlbmVteUJvYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNnYW1lYm9hcmQtZW5lbXlcIik7XG5jb25zdCBwbGF5ZXJCb2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZ2FtZWJvYXJkLXBsYXllclwiKTtcbmNvbnN0IGJ1dHRvblBsYWNlRmxlZXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3BsYWNlLWZsZWV0XCIpO1xuY29uc3QgYnV0dG9uU3RhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3N0YXJ0XCIpO1xuY29uc3QgdGV4dEZpZWxkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0ZXh0XCIpO1xuXG5sZXQgYm9hcmRQbGF5ZXIgPSBuZXcgR2FtZWJvYXJkKDEwLCAxMCk7XG5sZXQgYm9hcmRFbmVteSA9IG5ldyBHYW1lYm9hcmQoMTAsIDEwKTtcblxubGV0IHNoaXBzID0ge307XG5sZXQgc2hpcHNFbmVteSA9IHt9O1xuXG5mdW5jdGlvbiBpbml0aWFsaXplU2hpcHMoKSB7XG4gIHNoaXBzID0ge1xuICAgIHN1Ym1hcmluZTE6IG5ldyBTaGlwKDEsIFwic3VibWFyaW5lMVwiKSxcbiAgICBzdWJtYXJpbmUyOiBuZXcgU2hpcCgxLCBcInN1Ym1hcmluZTJcIiksXG4gICAgZGVzdHJveWVyMTogbmV3IFNoaXAoMiwgXCJkZXN0cm95ZXIxXCIpLFxuICAgIGRlc3Ryb3llcjI6IG5ldyBTaGlwKDIsIFwiZGVzdHJveWVyMlwiKSxcbiAgICBjcnVpc2VyOiBuZXcgU2hpcCgzLCBcImNydWlzZXJcIiksXG4gICAgYmF0dGxlc2hpcDogbmV3IFNoaXAoNCwgXCJiYXR0bGVzaGlwXCIpLFxuICAgIGNhcnJpZXI6IG5ldyBTaGlwKDUsIFwiY2FycmllclwiKSxcbiAgfTtcbiAgc2hpcHNFbmVteSA9IHtcbiAgICBzdWJtYXJpbmUxRW5lbXk6IG5ldyBTaGlwKDEpLFxuICAgIHN1Ym1hcmluZTJFbmVteTogbmV3IFNoaXAoMSksXG4gICAgZGVzdHJveWVyMUVuZW15OiBuZXcgU2hpcCgyKSxcbiAgICBkZXN0cm95ZXIyRW5lbXk6IG5ldyBTaGlwKDIpLFxuICAgIGNydWlzZXJFbmVteTogbmV3IFNoaXAoMyksXG4gICAgYmF0dGxlc2hpcEVuZW15OiBuZXcgU2hpcCg0KSxcbiAgICBjYXJyaWVyRW5lbXk6IG5ldyBTaGlwKDUpLFxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVQbGF5ZXJCb2FyZCgpIHtcbiAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgMTA7IHJvdysrKSB7XG4gICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgMTA7IGNvbCsrKSB7XG4gICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcImNlbGxcIik7XG4gICAgICBjZWxsLnNldEF0dHJpYnV0ZShcImlkXCIsIGAke3Jvd30tJHtjb2x9YCk7XG4gICAgICBwbGF5ZXJCb2FyZC5hcHBlbmRDaGlsZChjZWxsKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlRW5lbXlCb2FyZCgpIHtcbiAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgMTA7IHJvdysrKSB7XG4gICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgMTA7IGNvbCsrKSB7XG4gICAgICBjb25zdCBjZWxsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNlbGwuY2xhc3NMaXN0LmFkZChcImNlbGwtZW5lbXlcIik7XG4gICAgICBjZWxsLnNldEF0dHJpYnV0ZShcImlkXCIsIGAke3Jvd30tJHtjb2x9LWVuZW15YCk7XG4gICAgICBlbmVteUJvYXJkLmFwcGVuZENoaWxkKGNlbGwpO1xuICAgIH1cbiAgfVxufVxuaW5pdGlhbGl6ZVNoaXBzKCk7XG5jcmVhdGVQbGF5ZXJCb2FyZCgpO1xuY3JlYXRlRW5lbXlCb2FyZCgpO1xuY29uc3QgY2VsbHNFbmVteSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbC1lbmVteVwiKTtcblxuLyogZGlzcGxheXMgc2hpcHMgb24gdGhlIHZpc2libGUgYm9hcmQgYWNjb3JkaW5nXG50byB0aGUgYm9hcmQgb2JqZWN0ICovXG5mdW5jdGlvbiBkaXNwbGF5U2hpcHMoYm9hcmQsIGVuZW15ID0gZmFsc2UpIHtcbiAgZm9yIChsZXQgcm93ID0gMDsgcm93IDwgMTA7IHJvdysrKSB7XG4gICAgZm9yIChsZXQgY29sID0gMDsgY29sIDwgMTA7IGNvbCsrKSB7XG4gICAgICBpZiAoYm9hcmQuZ3JpZFtyb3ddW2NvbF0gJiYgIWVuZW15KSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtyb3d9LSR7Y29sfWApO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJzaGlwXCIpO1xuICAgICAgICBjZWxsLmRyYWdnYWJsZSA9IHRydWU7XG4gICAgICB9IGVsc2UgaWYgKGJvYXJkLmdyaWRbcm93XVtjb2xdICYmIGVuZW15KSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtyb3d9LSR7Y29sfS1lbmVteWApO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJzaGlwLWVuZW15XCIpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKiBwbGFjZXMgc2hpcHMgb24gcmFuZG9tIG9uIHRoZSBib2FyZCAqL1xuZnVuY3Rpb24gcmFuZG9tUGxhY2VtZW50KGJvYXJkLCBmbGVldCkge1xuICBmb3IgKGNvbnN0IHNoaXAgaW4gZmxlZXQpIHtcbiAgICBsZXQgcm93ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xuICAgIGxldCBjb2wgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgbGV0IG9yaWVudGF0aW9uID0gW1widmVydGljYWxcIiwgXCJob3Jpem9udGFsXCJdW01hdGgucmFuZG9tKCkgPCAwLjUgPyAwIDogMV07XG4gICAgd2hpbGUgKCFib2FyZC5pc1ZhbGlkUGxhY2VtZW50KGZsZWV0W3NoaXBdLCByb3csIGNvbCwgb3JpZW50YXRpb24pKSB7XG4gICAgICByb3cgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICBjb2wgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gICAgICBvcmllbnRhdGlvbiA9IFtcInZlcnRpY2FsXCIsIFwiaG9yaXpvbnRhbFwiXVtNYXRoLnJhbmRvbSgpIDwgMC41ID8gMCA6IDFdO1xuICAgIH1cbiAgICBib2FyZC5wbGFjZVNoaXAoZmxlZXRbc2hpcF0sIHJvdywgY29sLCBvcmllbnRhdGlvbik7XG4gIH1cbn1cblxuLyogd2lwZXMgYWRkZWQgY2xhc3NlcyBhbmQgb3ZlcndyaXRlcyBleGlzdGluZyBib2FyZHMgd2l0aFxuZW1wdHkgb25lcywgcmVtb3ZlcyBldmVudCBsaXN0ZW5lcnMgZnJvbSBlbmVteSBib2FyZCAqL1xuZnVuY3Rpb24gd2lwZUJvYXJkcygpIHtcbiAgY29uc3QgdXNlZENlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oaXQsIC5zaGlwLCAuc2hpcC1lbmVteVwiKTtcbiAgdXNlZENlbGxzLmZvckVhY2goKGNlbGwpID0+IHtcbiAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaGlwXCIpO1xuICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZShcImhpdFwiKTtcbiAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaGlwLWVuZW15XCIpO1xuICB9KTtcbiAgYm9hcmRQbGF5ZXIgPSBuZXcgR2FtZWJvYXJkKDEwLCAxMCk7XG4gIGJvYXJkRW5lbXkgPSBuZXcgR2FtZWJvYXJkKDEwLCAxMCk7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11c2UtYmVmb3JlLWRlZmluZVxuICBjZWxsc0VuZW15LmZvckVhY2goKGkpID0+IGkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVBsYXllckNsaWNrKSk7XG59XG5cbi8qIGZvciBldmVyeSBzaGlwIGluIHRoZSBmbGVldCBjaGVja3MgaWYgdGhlIHNoaXAgXG5pcyBzdW5rIGFuZCBjb2xvcnMgdGhlIGNlbnRlciBzaGlwIHJlZCBpZiBpdCBpcyAqL1xuZnVuY3Rpb24gc2hvd1N1bmtGbGVldChmbGVldCwgZW5lbXkgPSBmYWxzZSkge1xuICBmb3IgKGNvbnN0IHNoaXAgaW4gZmxlZXQpIHtcbiAgICBpZiAoZmxlZXRbc2hpcF0uaXNTdW5rKCkgJiYgIWVuZW15KSB7XG4gICAgICBjb25zdCBzaG93blN1bmtTaGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7c2hpcH0tcGxheWVyYCk7XG4gICAgICBjb25zdCBjaGlsZERpdnMgPSBzaG93blN1bmtTaGlwLnF1ZXJ5U2VsZWN0b3JBbGwoXCJkaXZcIik7XG4gICAgICBjaGlsZERpdnMuZm9yRWFjaCgoY2hpbGQpID0+IHtcbiAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZChcImhpdFwiKTtcbiAgICAgICAgY2hpbGQuY2xhc3NMaXN0LmFkZChcInNoaXBcIik7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGZsZWV0W3NoaXBdLmlzU3VuaygpICYmIGVuZW15KSB7XG4gICAgICBjb25zdCBzaG93blN1bmtTaGlwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgICAgYC4ke3NoaXAuc2xpY2UoMCwgLTUpfS1lbmVteWAsXG4gICAgICApO1xuICAgICAgY29uc3QgY2hpbGREaXZzID0gc2hvd25TdW5rU2hpcC5xdWVyeVNlbGVjdG9yQWxsKFwiZGl2XCIpO1xuICAgICAgY2hpbGREaXZzLmZvckVhY2goKGNoaWxkKSA9PiB7XG4gICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gICAgICAgIGNoaWxkLmNsYXNzTGlzdC5hZGQoXCJzaGlwXCIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG5cbnJhbmRvbVBsYWNlbWVudChib2FyZFBsYXllciwgc2hpcHMpO1xuZGlzcGxheVNoaXBzKGJvYXJkUGxheWVyKTtcbnJhbmRvbVBsYWNlbWVudChib2FyZEVuZW15LCBzaGlwc0VuZW15KTtcbmRpc3BsYXlTaGlwcyhib2FyZEVuZW15LCB0cnVlKTtcblxuYnV0dG9uUGxhY2VGbGVldC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICB0ZXh0RmllbGQuaW5uZXJUZXh0ID0gXCJQbGFjZSB5b3VyIGZsZWV0IVwiO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rvb2x0aXBcIikuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcbiAgYnV0dG9uUGxhY2VGbGVldC5pbm5lclRleHQgPSBcIlJhbmRvbSBwbGFjZW1lbnRcIjtcbiAgd2lwZUJvYXJkcygpO1xuICBpbml0aWFsaXplU2hpcHMoKTtcbiAgcmFuZG9tUGxhY2VtZW50KGJvYXJkUGxheWVyLCBzaGlwcyk7XG4gIHJhbmRvbVBsYWNlbWVudChib2FyZEVuZW15LCBzaGlwc0VuZW15KTtcbiAgZGlzcGxheVNoaXBzKGJvYXJkUGxheWVyKTtcbiAgZGlzcGxheVNoaXBzKGJvYXJkRW5lbXksIHRydWUpO1xuICBib2FyZC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ3N0YXJ0XCIsIGRyYWdTdGFydCk7XG4gIGJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnb3ZlclwiLCBkcmFnT3Zlcik7XG4gIGJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW50ZXJcIiwgZHJhZ0VudGVyKTtcbiAgYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdsZWF2ZVwiLCBkcmFnTGVhdmUpO1xuICBib2FyZC5hZGRFdmVudExpc3RlbmVyKFwiZHJvcFwiLCBkcmFnRHJvcCk7XG4gIGJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIGRyYWdFbmQpO1xufSk7XG5cbmZ1bmN0aW9uIHBsYXllckF0dGFjayhlKSB7XG4gIGUudGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gIGJvYXJkRW5lbXkucmVjZWl2ZUF0dGFjayhlLnRhcmdldC5pZFswXSwgZS50YXJnZXQuaWRbMl0pO1xuICBzaG93U3Vua0ZsZWV0KHNoaXBzRW5lbXksIHRydWUpO1xufVxuXG5mdW5jdGlvbiBjb21wdXRlckF0dGFjaygpIHtcbiAgbGV0IHJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgbGV0IGNvbCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgd2hpbGUgKGJvYXJkUGxheWVyLmF0dGFja2VkQ2VsbHMuaW5jbHVkZXMoYCR7cm93fS0ke2NvbH1gKSkge1xuICAgIHJvdyA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwKTtcbiAgICBjb2wgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCk7XG4gIH1cbiAgY29uc3QgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7cm93fS0ke2NvbH1gKTtcbiAgdGFyZ2V0LmNsYXNzTGlzdC5hZGQoXCJoaXRcIik7XG4gIGJvYXJkUGxheWVyLnJlY2VpdmVBdHRhY2socm93LCBjb2wpO1xuICBzaG93U3Vua0ZsZWV0KHNoaXBzKTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlUGxheWVyQ2xpY2soZSkge1xuICBpZiAoXG4gICAgIWJvYXJkRW5lbXkuYXR0YWNrZWRDZWxscy5pbmNsdWRlcyhgJHtlLnRhcmdldC5pZFswXX0tJHtlLnRhcmdldC5pZFsyXX1gKVxuICApIHtcbiAgICBwbGF5ZXJBdHRhY2soZSk7XG4gICAgaWYgKGJvYXJkRW5lbXkuY2hlY2tWaWN0b3J5KCkpIHtcbiAgICAgIHRleHRGaWVsZC5pbm5lclRleHQgPSBcIllvdSB3aW4hXCI7XG4gICAgICBjZWxsc0VuZW15LmZvckVhY2goKGkpID0+XG4gICAgICAgIGkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVBsYXllckNsaWNrKSxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbXB1dGVyQXR0YWNrKCk7XG4gICAgaWYgKGJvYXJkUGxheWVyLmNoZWNrVmljdG9yeSgpKSB7XG4gICAgICB0ZXh0RmllbGQuaW5uZXJUZXh0ID0gXCJZb3UgbG9vc2UhXCI7XG4gICAgICBjZWxsc0VuZW15LmZvckVhY2goKGkpID0+XG4gICAgICAgIGkucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVBsYXllckNsaWNrKSxcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIHNldHVwUGxheWVyVHVybigpIHtcbiAgY2VsbHNFbmVteS5mb3JFYWNoKChjZWxsKSA9PlxuICAgIGNlbGwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGhhbmRsZVBsYXllckNsaWNrKSxcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2FtZXBsYXkoKSB7XG4gIHRleHRGaWVsZC5pbm5lclRleHQgPSBcIkdhbWUgaGFzIHN0YXJ0ZWQhXCI7XG4gIGJ1dHRvblBsYWNlRmxlZXQuaW5uZXJUZXh0ID0gXCJOZXcgZ2FtZVwiO1xuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rvb2x0aXBcIikuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuICBzZXR1cFBsYXllclR1cm4oKTtcbn1cblxuY29uc3QgYm9hcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2dhbWVib2FyZC1wbGF5ZXJcIik7XG5sZXQgb3JpZW50YXRpb247XG5jb25zdCB0ZW1wID0geyBsZW5ndGg6IG51bGwgfTtcbmxldCBwb3NzaWJsZUNlbGxzID0gW107XG5cbmJ1dHRvblN0YXJ0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGdhbWVwbGF5KCk7XG4gIGJvYXJkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgZHJhZ1N0YXJ0KTtcbiAgYm9hcmQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIGRyYWdPdmVyKTtcbiAgYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbnRlclwiLCBkcmFnRW50ZXIpO1xuICBib2FyZC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ2xlYXZlXCIsIGRyYWdMZWF2ZSk7XG4gIGJvYXJkLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIGRyYWdEcm9wKTtcbiAgYm9hcmQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImRyYWdlbmRcIiwgZHJhZ0VuZCk7XG59KTtcblxuZnVuY3Rpb24gZHJhZ1N0YXJ0KGUpIHtcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInNoaXBcIikpIHtcbiAgICBjb25zdCByb3cgPSBlLnRhcmdldC5pZFswXTtcbiAgICBjb25zdCBjb2wgPSBlLnRhcmdldC5pZFsyXTtcbiAgICBlLmRhdGFUcmFuc2Zlci5lZmZlY3RBbGxvd2VkID0gXCJtb3ZlXCI7XG4gICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgaW1nLnNyYyA9IFwiXCI7XG4gICAgLy8gU2V0IGVtcHR5IGltYWdlIGFzIHRoZSBkcmFnIGltYWdlXG4gICAgZS5kYXRhVHJhbnNmZXIuc2V0RHJhZ0ltYWdlKGltZywgMCwgMCk7XG4gICAgZS5kYXRhVHJhbnNmZXIuc2V0RGF0YShcbiAgICAgIFwiYXBwbGljYXRpb24vanNvblwiLFxuICAgICAgSlNPTi5zdHJpbmdpZnkoYm9hcmRQbGF5ZXIuZ3JpZFtyb3ddW2NvbF0pLFxuICAgICk7XG4gICAgdGVtcC5sZW5ndGggPSBib2FyZFBsYXllci5ncmlkW3Jvd11bY29sXS5sZW5ndGg7XG4gICAgb3JpZW50YXRpb24gPSBib2FyZFBsYXllci5ncmlkW3Jvd11bY29sXS5vcmllbnRhdGlvbjtcbiAgfSBlbHNlIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZHJhZ092ZXIoZSkge1xuICBpZiAoIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInNoaXBcIikpIGUucHJldmVudERlZmF1bHQoKTtcbn1cblxuZnVuY3Rpb24gZHJhZ0VudGVyKGUpIHtcbiAgcG9zc2libGVDZWxscyA9IFtdO1xuICBjb25zdCByb3cgPSBwYXJzZUludChlLnRhcmdldC5pZFswXSwgMTApO1xuICBjb25zdCBjb2wgPSBwYXJzZUludChlLnRhcmdldC5pZFsyXSwgMTApO1xuICB0cnkge1xuICAgIGlmIChvcmllbnRhdGlvbiA9PT0gXCJ2ZXJ0aWNhbFwiKSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcG9zc2libGVDZWxscy5wdXNoKGAke3JvdyArIGl9LSR7Y29sfWApO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlbXAubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgcG9zc2libGVDZWxscy5wdXNoKGAke3Jvd30tJHtjb2wgKyBpfWApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIWJvYXJkUGxheWVyLmlzVmFsaWRQbGFjZW1lbnQodGVtcCwgcm93LCBjb2wsIG9yaWVudGF0aW9uKSkge1xuICAgICAgZm9yIChjb25zdCBpIG9mIHBvc3NpYmxlQ2VsbHMpIHtcbiAgICAgICAgY29uc3QgY2VsbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGAke2lbMF19LSR7aVsyXX1gKTtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFwiaW52YWxpZC1kcm9wXCIpO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoXCJ2YWxpZC1kcm9wXCIpO1xuICAgICAgICBjZWxsLmNsYXNzTGlzdC5hZGQoXCJpbnZhbGlkLWRyb3BcIik7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAoY29uc3QgaSBvZiBwb3NzaWJsZUNlbGxzKSB7XG4gICAgICAgIGNvbnN0IGNlbGwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgJHtpWzBdfS0ke2lbMl19YCk7XG4gICAgICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZShcImludmFsaWQtZHJvcFwiKTtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFwidmFsaWQtZHJvcFwiKTtcbiAgICAgICAgY2VsbC5jbGFzc0xpc3QuYWRkKFwidmFsaWQtZHJvcFwiKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5sb2coXCJPdXQgb2YgcmFuZ2U6IFwiLCBlcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gZHJhZ0xlYXZlKCkge1xuICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuY2VsbFwiKTtcbiAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgIGlmICghcG9zc2libGVDZWxscy5pbmNsdWRlcyhjZWxsLmlkKSkge1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFwiaW52YWxpZC1kcm9wXCIpO1xuICAgICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFwidmFsaWQtZHJvcFwiKTtcbiAgICB9XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBkcmFnRHJvcChlKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgLyogZ2V0IHRoZSBkYXRhIGZyb20gcGlja2VkIHVwIGNlbGwgKi9cbiAgZS5kYXRhVHJhbnNmZXIuZHJvcEVmZmVjdCA9IFwibW92ZVwiO1xuICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShlLmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiYXBwbGljYXRpb24vanNvblwiKSk7XG4gIGNvbnN0IHNoaXAgPSBuZXcgU2hpcChkYXRhLmxlbmd0aCwgZGF0YS5uYW1lKTtcbiAgY29uc3QgeyBvcmllbnRhdGlvbiB9ID0gZGF0YTtcbiAgY29uc3Qgcm93RnJvbSA9IGRhdGEuY29vcmRpbmF0ZXNbMF1bMF07XG4gIGNvbnN0IGNvbEZyb20gPSBkYXRhLmNvb3JkaW5hdGVzWzBdWzJdO1xuICAvKiBwbGFjZXMgdGhlIHNoaXAgaW50byB0aGUgdGFyZ2V0IGNlbGwgKi9cbiAgY29uc3Qgcm93ID0gcGFyc2VJbnQoZS50YXJnZXQuaWRbMF0sIDEwKTtcbiAgY29uc3QgY29sID0gcGFyc2VJbnQoZS50YXJnZXQuaWRbMl0sIDEwKTtcbiAgaWYgKGJvYXJkUGxheWVyLmlzVmFsaWRQbGFjZW1lbnQoc2hpcCwgcm93LCBjb2wsIG9yaWVudGF0aW9uKSkge1xuICAgIC8qIHJlbW92ZXMgdGhlIHNoaXAgdmlzdWFseSAqL1xuICAgIGZvciAoY29uc3QgY29vcmRpbmF0ZSBvZiBib2FyZFBsYXllci5ncmlkW3Jvd0Zyb21dW2NvbEZyb21dLmNvb3JkaW5hdGVzKSB7XG4gICAgICBkb2N1bWVudFxuICAgICAgICAuZ2V0RWxlbWVudEJ5SWQoYCR7Y29vcmRpbmF0ZVswXX0tJHtjb29yZGluYXRlWzJdfWApXG4gICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKFwic2hpcFwiKTtcbiAgICB9XG4gICAgLyogcmVtb3ZlcyB0aGUgc2hpcCBmcm9tIHRoZSBib2FyZCAqL1xuICAgIGJvYXJkUGxheWVyLnJlbW92ZVNoaXAoYm9hcmRQbGF5ZXIuZ3JpZFtyb3dGcm9tXVtjb2xGcm9tXSk7XG4gICAgLyogcGxhY2VzIHRoZSBzaGlwIGluIHRoZSBuZXcgbG9jYXRpb24gKi9cbiAgICBib2FyZFBsYXllci5wbGFjZVNoaXAoc2hpcCwgcm93LCBjb2wsIG9yaWVudGF0aW9uKTtcbiAgICAvKiB1cGRhdGUgY29vcmRpbmF0ZXMgaW4gc2hpcHMgb2JqZWN0IGFjY29yZGluZyB0byBib2FyZCAqL1xuICAgIHNoaXBzW3NoaXAubmFtZV0uY29vcmRpbmF0ZXMgPSBib2FyZFBsYXllci5ncmlkW3Jvd11bY29sXS5jb29yZGluYXRlcztcbiAgICBzaGlwc1tzaGlwLm5hbWVdLmhpdHMgPSBib2FyZFBsYXllci5ncmlkW3Jvd11bY29sXS5oaXRzO1xuICB9XG4gIGNvbnN0IGNlbGxzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5pbnZhbGlkLWRyb3AsIC52YWxpZC1kcm9wXCIpO1xuICBjZWxscy5mb3JFYWNoKChjZWxsKSA9PiB7XG4gICAgY2VsbC5jbGFzc0xpc3QucmVtb3ZlKFwiaW52YWxpZC1kcm9wXCIpO1xuICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZShcInZhbGlkLWRyb3BcIik7XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBkcmFnRW5kKCkge1xuICBjb25zdCBjZWxscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaW52YWxpZC1kcm9wLCAudmFsaWQtZHJvcFwiKTtcbiAgY2VsbHMuZm9yRWFjaCgoY2VsbCkgPT4ge1xuICAgIGNlbGwuY2xhc3NMaXN0LnJlbW92ZShcImludmFsaWQtZHJvcFwiKTtcbiAgICBjZWxsLmNsYXNzTGlzdC5yZW1vdmUoXCJ2YWxpZC1kcm9wXCIpO1xuICB9KTtcbiAgZGlzcGxheVNoaXBzKGJvYXJkUGxheWVyKTtcbn1cblxuYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdzdGFydFwiLCBkcmFnU3RhcnQpO1xuYm9hcmQuYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdvdmVyXCIsIGRyYWdPdmVyKTtcbmJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW50ZXJcIiwgZHJhZ0VudGVyKTtcbmJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgZHJhZ0xlYXZlKTtcbmJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIGRyYWdEcm9wKTtcbmJvYXJkLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnZW5kXCIsIGRyYWdFbmQpO1xuXG5mdW5jdGlvbiBjaGVja0F2YWlsYWJsZU9yaWVudGF0aW9uKHNoaXApIHtcbiAgLyogaWYgY3VycmVudCBvcmllbnRhdGlvbiBpcyB0aGlzLCBjaGVjayB0aGUgb3RoZXIgKi9cbiAgaWYgKHNoaXAub3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiKSB7XG4gICAgY29uc3Qgcm93ID0gcGFyc2VJbnQoc2hpcC5jb29yZGluYXRlc1swXVswXSwgMTApO1xuICAgIGNvbnN0IGNvbCA9IHBhcnNlSW50KHNoaXAuY29vcmRpbmF0ZXNbMF1bMl0sIDEwKTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHNoaXAubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyb3cgKyBpID4gOSB8fCBib2FyZFBsYXllci5ncmlkW3JvdyArIGldW2NvbF0pIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBjb25zdCByb3cgPSBwYXJzZUludChzaGlwLmNvb3JkaW5hdGVzWzBdWzBdLCAxMCk7XG4gICAgY29uc3QgY29sID0gcGFyc2VJbnQoc2hpcC5jb29yZGluYXRlc1swXVsyXSwgMTApO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgc2hpcC5sZW5ndGg7IGkrKykge1xuICAgICAgaWYgKGNvbCArIGkgPiA5IHx8IGJvYXJkUGxheWVyLmdyaWRbcm93XVtjb2wgKyBpXSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjaGFuZ2VBeGlzKHNoaXApIHtcbiAgaWYgKGNoZWNrQXZhaWxhYmxlT3JpZW50YXRpb24oc2hpcCkpIHtcbiAgICBjb25zdCByb3cgPSBwYXJzZUludChzaGlwLmNvb3JkaW5hdGVzWzBdWzBdLCAxMCk7XG4gICAgY29uc3QgY29sID0gcGFyc2VJbnQoc2hpcC5jb29yZGluYXRlc1swXVsyXSwgMTApO1xuICAgIGZvciAoY29uc3QgY29vcmRpbmF0ZSBvZiBib2FyZFBsYXllci5ncmlkW3Jvd11bY29sXS5jb29yZGluYXRlcykge1xuICAgICAgZG9jdW1lbnRcbiAgICAgICAgLmdldEVsZW1lbnRCeUlkKGAke2Nvb3JkaW5hdGVbMF19LSR7Y29vcmRpbmF0ZVsyXX1gKVxuICAgICAgICAuY2xhc3NMaXN0LnJlbW92ZShcInNoaXBcIik7XG4gICAgfVxuICAgIGJvYXJkUGxheWVyLnJlbW92ZVNoaXAoc2hpcCk7XG4gICAgaWYgKHNoaXAub3JpZW50YXRpb24gPT09IFwiaG9yaXpvbnRhbFwiKSB7XG4gICAgICBib2FyZFBsYXllci5wbGFjZVNoaXAoc2hpcCwgcm93LCBjb2wsIFwidmVydGljYWxcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGJvYXJkUGxheWVyLnBsYWNlU2hpcChzaGlwLCByb3csIGNvbCwgXCJob3Jpem9udGFsXCIpO1xuICAgIH1cbiAgICBzaGlwc1tzaGlwLm5hbWVdLmNvb3JkaW5hdGVzID0gYm9hcmRQbGF5ZXIuZ3JpZFtyb3ddW2NvbF0uY29vcmRpbmF0ZXM7XG4gICAgc2hpcHNbc2hpcC5uYW1lXS5oaXRzID0gYm9hcmRQbGF5ZXIuZ3JpZFtyb3ddW2NvbF0uaGl0cztcbiAgfVxufVxuXG5ib2FyZC5hZGRFdmVudExpc3RlbmVyKFwiZGJsY2xpY2tcIiwgKGUpID0+IHtcbiAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInNoaXBcIikpIHtcbiAgICBjb25zdCByb3cgPSBlLnRhcmdldC5pZFswXTtcbiAgICBjb25zdCBjb2wgPSBlLnRhcmdldC5pZFsyXTtcbiAgICBjb25zdCBzaGlwID0gYm9hcmRQbGF5ZXIuZ3JpZFtyb3ddW2NvbF07XG4gICAgY2hhbmdlQXhpcyhzaGlwKTtcbiAgICBkaXNwbGF5U2hpcHMoYm9hcmRQbGF5ZXIpO1xuICB9XG59KTtcbiJdLCJuYW1lcyI6WyJfX19DU1NfTE9BREVSX1VSTF9JTVBPUlRfMF9fXyIsIlVSTCIsIl9fX0NTU19MT0FERVJfVVJMX0lNUE9SVF8xX19fIiwiX19fQ1NTX0xPQURFUl9FWFBPUlRfX18iLCJfX19DU1NfTE9BREVSX1VSTF9SRVBMQUNFTUVOVF8wX19fIiwiX19fQ1NTX0xPQURFUl9VUkxfUkVQTEFDRU1FTlRfMV9fXyIsInB1c2giLCJtb2R1bGUiLCJpZCIsImV4cG9ydHMiLCJjc3NXaXRoTWFwcGluZ1RvU3RyaW5nIiwibGlzdCIsInRvU3RyaW5nIiwidGhpcyIsIm1hcCIsIml0ZW0iLCJjb250ZW50IiwibmVlZExheWVyIiwiY29uY2F0IiwibGVuZ3RoIiwiam9pbiIsImkiLCJtb2R1bGVzIiwibWVkaWEiLCJkZWR1cGUiLCJzdXBwb3J0cyIsImxheWVyIiwidW5kZWZpbmVkIiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImsiLCJfayIsInVybCIsIm9wdGlvbnMiLCJTdHJpbmciLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInRlc3QiLCJzbGljZSIsImhhc2giLCJuZWVkUXVvdGVzIiwicmVwbGFjZSIsImNzc01hcHBpbmciLCJidG9hIiwiYmFzZTY0IiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwiZGF0YSIsInNvdXJjZU1hcHBpbmciLCJzdHlsZXNJbkRPTSIsImdldEluZGV4QnlJZGVudGlmaWVyIiwiaWRlbnRpZmllciIsInJlc3VsdCIsIm1vZHVsZXNUb0RvbSIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsImJhc2UiLCJjb3VudCIsImluZGV4QnlJZGVudGlmaWVyIiwib2JqIiwiY3NzIiwic291cmNlTWFwIiwicmVmZXJlbmNlcyIsInVwZGF0ZXIiLCJhZGRFbGVtZW50U3R5bGUiLCJieUluZGV4Iiwic3BsaWNlIiwiYXBpIiwiZG9tQVBJIiwidXBkYXRlIiwibmV3T2JqIiwicmVtb3ZlIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsImluZGV4IiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJtZW1vIiwiaW5zZXJ0Iiwic3R5bGUiLCJ0YXJnZXQiLCJzdHlsZVRhcmdldCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIndpbmRvdyIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsImUiLCJnZXRUYXJnZXQiLCJFcnJvciIsImFwcGVuZENoaWxkIiwiZWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJzZXRBdHRyaWJ1dGVzIiwiYXR0cmlidXRlcyIsInN0eWxlRWxlbWVudCIsIm5vbmNlIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0U3R5bGVFbGVtZW50Iiwic3R5bGVUYWdUcmFuc2Zvcm0iLCJhcHBseSIsInBhcmVudE5vZGUiLCJyZW1vdmVDaGlsZCIsInJlbW92ZVN0eWxlRWxlbWVudCIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiZmlyc3RDaGlsZCIsImNyZWF0ZVRleHROb2RlIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsIm0iLCJuIiwiZ2V0dGVyIiwiZCIsImEiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsImciLCJnbG9iYWxUaGlzIiwiRnVuY3Rpb24iLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic2NyaXB0VXJsIiwiaW1wb3J0U2NyaXB0cyIsImxvY2F0aW9uIiwiY3VycmVudFNjcmlwdCIsInNyYyIsInNjcmlwdHMiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInAiLCJiIiwiYmFzZVVSSSIsInNlbGYiLCJocmVmIiwibmMiLCJsb2NhbHMiLCJTaGlwIiwiY29uc3RydWN0b3IiLCJuYW1lIiwiaGl0cyIsIkFycmF5IiwiZmlsbCIsImNvb3JkaW5hdGVzIiwib3JpZW50YXRpb24iLCJoaXQiLCJmaXJzdFVuaGl0SW5kZXgiLCJpbmRleE9mIiwiaXNTdW5rIiwiZXZlcnkiLCJHYW1lYm9hcmQiLCJyb3dzIiwiY29scyIsImdyaWQiLCJjcmVhdGVFbXB0eUdyaWQiLCJhdHRhY2tlZENlbGxzIiwic3Vua2VuU2hpcHMiLCJmcm9tIiwiaXNWYWxpZFBsYWNlbWVudCIsInNoaXAiLCJyb3ciLCJjb2wiLCJwbGFjZVNoaXAiLCJjb25zb2xlIiwibG9nIiwicmVtb3ZlU2hpcCIsImNvb3JkaW5hdGUiLCJyZWNlaXZlQXR0YWNrIiwiY2VsbENvb3JkaW5hdGVzIiwiaW5jbHVkZXMiLCJjaGVja1ZpY3RvcnkiLCJkaXNwbGF5IiwiXyIsInJvd051bWJlciIsImNlbGwiLCJlbmVteUJvYXJkIiwicGxheWVyQm9hcmQiLCJidXR0b25QbGFjZUZsZWV0IiwiYnV0dG9uU3RhcnQiLCJ0ZXh0RmllbGQiLCJib2FyZFBsYXllciIsImJvYXJkRW5lbXkiLCJzaGlwcyIsInNoaXBzRW5lbXkiLCJpbml0aWFsaXplU2hpcHMiLCJzdWJtYXJpbmUxIiwic3VibWFyaW5lMiIsImRlc3Ryb3llcjEiLCJkZXN0cm95ZXIyIiwiY3J1aXNlciIsImJhdHRsZXNoaXAiLCJjYXJyaWVyIiwic3VibWFyaW5lMUVuZW15Iiwic3VibWFyaW5lMkVuZW15IiwiZGVzdHJveWVyMUVuZW15IiwiZGVzdHJveWVyMkVuZW15IiwiY3J1aXNlckVuZW15IiwiYmF0dGxlc2hpcEVuZW15IiwiY2FycmllckVuZW15IiwiY2xhc3NMaXN0IiwiYWRkIiwiY3JlYXRlUGxheWVyQm9hcmQiLCJjcmVhdGVFbmVteUJvYXJkIiwiY2VsbHNFbmVteSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkaXNwbGF5U2hpcHMiLCJib2FyZCIsImVuZW15IiwiZ2V0RWxlbWVudEJ5SWQiLCJkcmFnZ2FibGUiLCJyYW5kb21QbGFjZW1lbnQiLCJmbGVldCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInNob3dTdW5rRmxlZXQiLCJmb3JFYWNoIiwiY2hpbGQiLCJoYW5kbGVQbGF5ZXJDbGljayIsInBsYXllckF0dGFjayIsImlubmVyVGV4dCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb21wdXRlckF0dGFjayIsImFkZEV2ZW50TGlzdGVuZXIiLCJkcmFnU3RhcnQiLCJkcmFnT3ZlciIsImRyYWdFbnRlciIsImRyYWdMZWF2ZSIsImRyYWdEcm9wIiwiZHJhZ0VuZCIsInRlbXAiLCJwb3NzaWJsZUNlbGxzIiwiY29udGFpbnMiLCJkYXRhVHJhbnNmZXIiLCJlZmZlY3RBbGxvd2VkIiwiaW1nIiwiSW1hZ2UiLCJzZXREcmFnSW1hZ2UiLCJzZXREYXRhIiwicHJldmVudERlZmF1bHQiLCJwYXJzZUludCIsImVycm9yIiwiZHJvcEVmZmVjdCIsInBhcnNlIiwiZ2V0RGF0YSIsInJvd0Zyb20iLCJjb2xGcm9tIiwiY2hlY2tBdmFpbGFibGVPcmllbnRhdGlvbiIsImNoYW5nZUF4aXMiXSwic291cmNlUm9vdCI6IiJ9